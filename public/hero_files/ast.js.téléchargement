/*! AST v0.60.1 Updated: 2023-12-14 */!function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e){e.exports=JSON.parse('{"n":{"UT_IFRAME":"utif_","UT_DIV":"div_utif_"},"k":{"WARN":"WARN"},"f":{"DEBUG_MODE":"ast_debug","AST_DONGLE":"ast_dongle","AST_DEBUG_MEMBER":"ast_debug_member","AST_DEBUG_BIDDER":"ast_debug_bidder","AST_TEST":"ast_test","AST_TOOLKIT":"ast_toolkit","AST_OVERRIDE":{"BASE":"ast_override_","DIV":"div","INDEX":"index","TAG_ID":"tag_id","INV_CODE":"inv_code","PUBLISHER_ID":"publisher_id"}},"m":{"UNDEFINED":"undefined","OBJECT":"object","STRING":"string","NUMBER":"number"},"d":{"IE":"msie","OPERA":"opera"},"o":{"LOADED":"loaded","IMPRESSION":"impression"},"g":{"UT_BASE":"/ut/v3","IMPBUS":"ib.adnxs.com","IMPBUS_SIMPLE":"ib.adnxs-simple.com","UT_PREBID":"/ut/v3/prebid"},"s":{"MEDIA_TYPE":"media_type","CREATIVE_ID":"creative_id","AD_TYPE":"ad_type","BANNER":"banner","VIDEO":"video","CONTENT":"content","UUID":"uuid"},"l":{"BANNER":"banner","NATIVE":"native","VIDEO":"video"},"a":{"CREATIVE_ID":"creative_id","NOTIFY":"notify_url","NOAD":"no_ad_url","IMP_URLS":"impression_urls","TRACKERS":"trackers"},"e":{"RTB":"rtb","CSM":"csm","SSM":"ssm"},"b":{"BANNER":"banner","NATIVE":"native","VIDEO":"video"},"j":{"VIDEO_MEDIATION_JS":"//acdn.adnxs-simple.com/video/astMediation/AstMediationManager.js","BANNER_MEDIATION_JS":"//acdn.adnxs-simple.com/ast/mediation/0.60.1/mediation.js","SAFE_FRAME_URL":"//acdn.adnxs-simple.com/ast/safeframe/static/0.60.1/html/safeframe-v2.html","USERSYNC_URL":"https://acdn.adnxs.com/dmp/async_usersync.html","CDN_ORIGIN":"acdn.adnxs-simple.com"},"h":{"REQUEST":"adRequested","AVAILABLE":"adAvailable","LOADED":"adLoaded","LOADED_MEDIATED":"adLoadedMediated","NO_BID_MEDIATED":"adNoBidMediated","REQUEST_FAIL":"adRequestFailure","NO_BID":"adNoBid","DEFAULT":"adDefault","ERROR":"adError","COLLAPSE":"adCollapse","BAD_REQUEST":"adBadRequest"},"r":{"ARRAY":"Array","STRING":"String","FUNC":"Function","NUM":"Number","OBJ":"Object","BOOL":"Boolean"},"p":{"DEFAULT_ZINDEX":3000,"STATUS":{"READY":"ready","NOTIFY_EXPANDED":"expanded","NOTIFY_COLLAPSED":"collapsed","NOTIFY_ERROR":"error","FOCUS_CHANGE":"focus-change","GEOM_UPDATE":"geom-update","CMP":"cmp"}},"i":{"CREATIVE":"creative"},"c":{"NATIVE_VIEWABILITY":{"AD_RESPONSE":"adresponse","IMPRESSION":"impression"}},"q":{"ERROR_TYPES":{"AD_RESPONSE_ERROR":"adResponseError","ENDPOINT_ERROR":"endpointError"}}}')},function(e,t,n){"use strict";function a(e=""){return e.includes("adsdk.microsoft.com")||e.includes("adsdkprod.azureedge.net")||e.includes("adsdkprprod.azureedge.net")||e.includes("acdn.adnxs.com/ast/ast.js")||e.includes("acdn.adnxs-simple.com/ast/ast.js")||location.href.includes("pleaseTrackMeAdTelemetry")}function r(...e){return e.filter(Boolean).join(".")}function i(){var e;return(null===(e=window.location.ancestorOrigins)||void 0===e?void 0:e.length)>0?window.location.ancestorOrigins[window.location.ancestorOrigins.length-1]:window.location.href}function o(){return i().includes("allowAdTelemetry=1")}n.d(t,"d",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}))},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return i}));var a=n(8),r=n(1);const i=new class{constructor(){this.sessionData={},this.placementData={},this.sampleRate=1,this.skipLogging=!1,this.populateSessionData()}populateSessionData(){this.sessionData={sessionUuid:Object(a.v4)(),ua:window.navigator.userAgent,url:Object(r.c)(),sdkType:e.env.NAME||"unknown",sdkVersion:e.env.VERSION||"unknown"}}setSampleRate(t){this.sampleRate=e.env.IS_DEV||e.env.IS_TESTS||Object(r.a)()?1:t,this.skipLogging=this.skipLoggingBySampleRate()}skipLoggingBySampleRate(){return Math.random()>this.sampleRate}addSessionData(e){this.sessionData=Object.assign(Object.assign({},this.sessionData),e)}addPlacementData(e,t){this.placementData[e]||(this.placementData[e]={}),this.placementData[e]=Object.assign(Object.assign({},this.placementData[e]),t)}getSessionData(){return this.sessionData}getPlacementData(e=""){var t;return null!==(t=this.placementData[e])&&void 0!==t?t:{}}}}).call(this,n(5))},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o}));var a=n(2),r=n(4),i=n(9);class o{skipLogging(){var t;return!(e.env.IS_DEV||e.env.IS_TESTS||!(null===(t=a.a.getSessionData().url)||void 0===t?void 0:t.includes("//localhost")))||a.a.skipLogging}log(t,{id:n}={}){const o=Object.assign(Object.assign(Object.assign(Object.assign({},a.a.getSessionData()),a.a.getPlacementData(n)),t),{timestamp:(new Date).getTime()});this.skipLogging()||(e.env.IS_DEV?Object(i.a)(o):fetch(r.a.telemetry.endpoint,{method:"POST",body:JSON.stringify(o,(e,t)=>t instanceof Error?{name:t.name,message:t.message,stack:t.stack}:t),headers:{"Content-Type":"application/json"},credentials:"omit"}))}}}).call(this,n(5))},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return i}));var a=n(10),r=n(11);let i=a.a;e.env.IS_DEV&&(i=r.a)}).call(this,n(5))},function(e,t){var n,a,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{a="function"==typeof clearTimeout?clearTimeout:o}catch(e){a=o}}();var d,c=[],u=!1,l=-1;function p(){u&&d&&(u=!1,d.length?c=d.concat(c):l=-1,c.length&&g())}function g(){if(!u){var e=s(p);u=!0;for(var t=c.length;t;){for(d=c,c=[];++l<t;)d&&d[l].run();l=-1,t=c.length}d=null,u=!1,function(e){if(a===clearTimeout)return clearTimeout(e);if((a===o||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(e);try{a(e)}catch(t){try{return a.call(null,e)}catch(t){return a.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||u||s(g)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var a=new Uint8Array(16);e.exports=function(){return n(a),a}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},function(e,t){for(var n=[],a=0;a<256;++a)n[a]=(a+256).toString(16).substr(1);e.exports=function(e,t){var a=t||0,r=n;return[r[e[a++]],r[e[a++]],r[e[a++]],r[e[a++]],"-",r[e[a++]],r[e[a++]],"-",r[e[a++]],r[e[a++]],"-",r[e[a++]],r[e[a++]],"-",r[e[a++]],r[e[a++]],r[e[a++]],r[e[a++]],r[e[a++]],r[e[a++]]].join("")}},function(e,t,n){var a=n(12),r=n(13),i=r;i.v1=a,i.v4=r,e.exports=i},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const a=e=>({debug:"#888888",log:e?"#FFFFFF":"#000000",info:"#0000FF",warning:"#FFA500",error:"#FF0000",exception:"#8B0000"});function r(e){var t,n,r;const i=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,o="custom"===e.type?`[${e.type}] ${null===(t=e.data)||void 0===t?void 0:t.subtype}`:e.type,s="custom"===e.type?a(i).debug:"event"===e.type?a(i).info:"unhandledError"===e.type?a(i).exception:"handledError"===e.type?a(i).error:a(i).log,d=/error/i.test(String(e.type)),c="Telemetry logging: %c"+o,u=`font-size: 15px; font-weight: bold; color: ${s};`;if(d?console.group(c,u):console.groupCollapsed(c,u),console.log("body",e),"string"==typeof e.data){const t=JSON.parse(e.data);if(console.log("body.data:",t),d){let e=t;for(;e;){const t=new Error;t.name=e.name,t.message=e.message,t.filename=e.filename,t.lineno=e.lineno,t.colno=e.colno,t.stack=e.stack||(null===(n=e.error)||void 0===n?void 0:n.stack),t.type=e.type,console.error(t),(null===(r=e.debugData)||void 0===r?void 0:r.cause)?(console.log("--\x3e Caused by:"),e=e.debugData.cause):e=void 0}}}console.groupEnd(),console.log("--------------------")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a={telemetry:{endpoint:"https://bat.bing.net/adsdk/logs"}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a={telemetry:{endpoint:"https://bat.bing-int.net/adsdk/logs"}}},function(e,t,n){var a,r,i=n(6),o=n(7),s=0,d=0;e.exports=function(e,t,n){var c=t&&n||0,u=t||[],l=(e=e||{}).node||a,p=void 0!==e.clockseq?e.clockseq:r;if(null==l||null==p){var g=i();null==l&&(l=a=[1|g[0],g[1],g[2],g[3],g[4],g[5]]),null==p&&(p=r=16383&(g[6]<<8|g[7]))}var f=void 0!==e.msecs?e.msecs:(new Date).getTime(),m=void 0!==e.nsecs?e.nsecs:d+1,v=f-s+(m-d)/1e4;if(v<0&&void 0===e.clockseq&&(p=p+1&16383),(v<0||f>s)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=f,d=m,r=p;var h=(1e4*(268435455&(f+=122192928e5))+m)%4294967296;u[c++]=h>>>24&255,u[c++]=h>>>16&255,u[c++]=h>>>8&255,u[c++]=255&h;var y=f/4294967296*1e4&268435455;u[c++]=y>>>8&255,u[c++]=255&y,u[c++]=y>>>24&15|16,u[c++]=y>>>16&255,u[c++]=p>>>8|128,u[c++]=255&p;for(var b=0;b<6;++b)u[c+b]=l[b];return t||o(u)}},function(e,t,n){var a=n(6),r=n(7);e.exports=function(e,t,n){var i=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||a)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var s=0;s<16;++s)t[i+s]=o[s];return t||r(o)}},function(e,t,n){"use strict";n.r(t),Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}()||(Object.defineProperty=function(e,t,n){e[t]=n.value});var a;function r(e){i.setParentNode(e),i.getContainer().querySelector("#ancookie-close").addEventListener("click",(function(){e.remove()}));var t,n=function(){var e=i.getSliderElement(),n=o(e),r=i.getMessageElement();r.setAttribute("style","-webkit-transition: none; -webkit-transform: translateX(0); -webkit-column-width: "+n+"px;");var s=i.getNav();s.innerHTML="",clearTimeout(t),t=setTimeout((function(){clearInterval(a),r.style.webkitTransition="opacity 0.3s ease-out",r.style.opacity=1;var t=e.scrollWidth+10;1<Math.round(t/n)&&(function(e){for(var t="<span class=selected></span>",n=1;n<2;n++)t+="<span></span>";e.innerHTML=t}(s),function(){var e,t=o(i.getSliderElement()),n={cycles:2,isFirstSlide:!0};a=setInterval((function(){n.cycles||clearInterval(a),e=n.isFirstSlide?1:0,n=function(e,t,n){var a=i.getMessageElement();a.style.webkitTransition="opacity 0.3s ease-out, -webkit-transform "+t+"s cubic-bezier(0.23, 1, 0.32, 1)",a.style.webkitTransform="translateX("+e+"px)",0==e&&n.cycles--,n.isFirstSlide=!n.isFirstSlide;for(var r=i.getContainer().querySelectorAll("span"),o=0;o<r.length;o++)"selected"===r[o].className?r[o].removeAttribute("class"):r[o].setAttribute("class","selected");return n}(-1*e*t,1.2,n)}),3e3)}())}),300)};n(),window.addEventListener("resize",n)}var i=function(){var e,t,n,a,r;return{getContainer:function(){return e||(e=r.querySelector("#ancookie-container")),e},getMessageElement:function(){return t||(t=r.querySelector("#ancookie-msg")),t},getSliderElement:function(){return n||(n=r.querySelector("#ancookie-slider")),n},getNav:function(){return a||(a=r.querySelector("#ancookie-nav div")),a},setParentNode:function(e){r=e}}}();function o(e){return e.offsetWidth}var s="http://ib.adnxs.com/seg?add=1&redir=",d="//ib.adnxs.com/getuidj",c=!1;function u(){c||(c=!0,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?(function(){if("true"!==document.cookie.replace(/(?:(?:^|.*;\s*)anCookiesetFooter\s*\=\s*([^;]*).*$)|^.*$/,"$1")){var e=((t=document.createElement("div")).id="cookiemsg-slider",t.innerHTML='<style media="screen">.ancookie-header {\n  background: #d3d3d3;\n  text-overflow: ellipsis;\n  border-collapse: collapse;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  min-height: 38px;\n}\n\n.ancookie-header * {\n  font-size: 12px;\n  font-family: Verdana, Arial, Helvetica, sans-serif !important;\n  color: #555;\n  line-height: normal !important;\n  margin: 0;\n  padding: 0;\n}\n\n.ancookie-header p {\n  padding: 10px 10px 10px 38px;\n  text-align: left;\n}\n\n.ancookie-header a:link,\n.ancookie-header a:hover,\n.ancookie-header a:visited,\n.ancookie-header a:active {\n  color: #e6e6e6;\n  text-decoration: underline;\n  font-weight: 700;\n}\n\n.ancookie-header {\n  position: fixed;\n  opacity: 0.9;\n}\n\n.ancookie-header * {\n  font-size: 11px !important;\n}\n\n#ancookie-msg {\n  height: 34px;\n  opacity: 0;\n}\n\n@media only screen and (min-width: 1224px) {\n  .ancookie-header * {\n    font-size: 12px !important;\n  }\n\n  #ancookie-msg {\n    height: 20px;\n    opacity: 0;\n  }\n}\n\n@media only screen and (min-device-width: 768px) and (max-device-width: 1024px) {\n  .ancookie-header {\n    position: fixed;\n  }\n}\n\n.ancookie-header {\n  z-index: 9999;\n  opacity: 1;\n}\n\n#ancookie-slider {\n  overflow: hidden;\n  padding: 10px;\n  box-sizing: border-box;\n}\n\n#ancookie-slider p {\n  position: relative;\n  margin: 0;\n  padding: 0;\n  opacity: 0;\n  -webkit-column-gap: 20px;\n  -webkit-column-rule-width: 0;\n}\n\n#ancookie-nav {\n  position: absolute;\n  right: 0;\n  left: 0;\n  top: -11px;\n  z-index: 200;\n  text-align: center;\n}\n\n#ancookie-nav div {\n  display: inline-block;\n  padding: 0 10px;\n  background-color: #d3d3d3;\n  border-radius: 10px 10px 0 0;\n}\n\n#ancookie-nav span {\n  display: inline-block;\n  width: 6px;\n  height: 6px;\n  background-color: #e6e6e6;\n  border-radius: 50%;\n  margin: 1px 2px;\n  box-sizing: border-box;\n  -webkit-transition: all 0.5s cubic-bezier(0.23, 1, 0.32, 1);\n  -webkit-opacity: 0.5;\n}\n\n#ancookie-nav span.selected {\n  background-color: #555;\n  -webkit-transition: all 0.5s cubic-bezier(0.23, 1, 0.32, 1);\n  -webkit-opacity: 1;\n}\n\n#ancookie-close {\n  position: absolute;\n  right: 5px;\n  bottom: 20px;\n  cursor: pointer;\n  -webkit-transform: scale(1.5);\n  transform: scale(1.5);\n}\n</style><div class="ancookie-header" id="ancookie-container">\n  <div id="ancookie-nav">\n    <div></div>\n  </div>\n  <div id="ancookie-slider">\n    <p id="ancookie-msg">Your browser blocks 3rd party cookies by default. By clicking on page you allow our partner AppNexus to place cookies to show relevant ads. Read more or opt out of these cookies <a href="https://www.appnexus.com/en/company/platform-privacy-policy#choices" target="_blank" style="color: #4f4f4f;">here</a>. This notice appears once </p>\n    <div id="ancookie-close">&times</div>\n  </div>\n</div>\n',t);document.body.appendChild(e),r(e),document.cookie="anCookiesetFooter=true; expires=Fri, 31 Dec 9999 23:59:59 GMT"}var t}(),function(e,t){var n;try{n=new XMLHttpRequest}catch(e){return}n.open("GET",e),n.withCredentials=!0,n.onreadystatechange=function(){if(4===n.readyState&&200===n.status)try{var e=JSON.parse(n.responseText);t(e)}catch(e){console.error(e)}},n.send()}(d,l)):console.log("Not safari, skipping link override"))}function l(e){console.log(e.uid),0===(parseInt(e.uid,10)||0)&&function(){console.log("Perfoming link override.");for(var e=0;e<document.links.length;e++){var t=document.links[e];t.href=s+encodeURIComponent(t.href)}}()}var p=n(2),g=n(3),f=n(1),m=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};class v extends g.a{trackEvent(e,t){this.log("string"==typeof e?{type:e}:e,{id:t})}trackCustomEvent(e,t){var{type:n}=e,a=m(e,["type"]);this.log({type:Object(f.b)("custom",n),data:a},{id:t})}}const h=new v;var y;!function(e){e[e.Critical=1]="Critical",e[e.HighImpact=2]="HighImpact",e[e.Alert=3]="Alert"}(y||(y={}));class b extends g.a{logError(e,t,n){var a;const r=n;this.log({severity:e,type:Object(f.b)("error",t),message:null==n?void 0:n.message,data:n?{filename:null==r?void 0:r.filename,lineno:null==r?void 0:r.lineno,colno:null==r?void 0:r.colno,stack:(null==r?void 0:r.stack)||(null===(a=null==n?void 0:n.error)||void 0===a?void 0:a.stack),type:null==n?void 0:n.type,debugData:null==n?void 0:n.debugData}:void 0})}trackCriticalError(e,t){this.logError(y.Critical,e,t)}trackHighImpactError(e,t){this.logError(y.HighImpact,e,t)}trackAlertError(e,t){this.logError(y.Alert,e,t)}}const w=new b,I="sdkInit",E="adServerRequest",_="adServerRequestFill",k="adServerRequestNoFill",S="impression",T="adClick",x=e=>Object(f.b)("mediation",e);x("optIn"),x("optOut"),x("adServerRequest"),x("adServerRequestFill"),x("adServerRequestNoFill"),x("impression"),x("mrcView"),x("adClick"),x("timeout");var A,C=n(4);!function(e){e.resource="resource",e.measure="measure"}(A||(A={}));class D extends g.a{constructor(){super(...arguments),this.resourcesToTrackFilters={sdksFiles:f.d},this.logResourcePerf=e=>{const{duration:t,name:n}=e;if(!n.includes(C.a.telemetry.endpoint))for(const[e,a]of Object.entries(this.resourcesToTrackFilters))if(a(n)){this.log({type:Object(f.b)("perf",A.resource,e),data:{duration:Math.ceil(t),name:n}});break}}}disconnectPerfObserver(){this.observer&&this.observer.disconnect()}createStartMark(e){performance.mark(e+"_start")}trackMark(e,t){performance.mark(e+"_end"),this.logMarks({measureName:e,startMarkName:e+"_start",endMarkName:e+"_end"},t)}logMarks({measureName:e,startMarkName:t,endMarkName:n},a){const{duration:r}=performance.measure(e,t,n);this.log({type:Object(f.b)("perf",A.measure,e),data:Object.assign(Object.assign({},a),{duration:Math.ceil(r)})})}init(){this.connectPerfObserver(),this.sendResourcesTiming()}sendResourcesTiming(){if(!performance.getEntriesByType)return;window.performance.getEntriesByType("resource").forEach(this.logResourcePerf)}connectPerfObserver(){window.PerformanceObserver&&(this.observer=new PerformanceObserver(e=>{e.getEntries().forEach(this.logResourcePerf)}),this.observer.observe({entryTypes:["resource"]}))}addResourceToTrack(e,t){this.resourcesToTrackFilters[e]=t}}const R=new D;var M=n(0),P=M.e.RTB,O=M.s.BANNER,N=M.s.CONTENT,q="https:"===window.document.location.protocol?"https:":"http:",B=function(e,t){var n=void 0,a=function(e){return M.n.UT_IFRAME+e.targetId+"_"+we()}(e),r=Me();if((n=null!==r.document.getElementById(a)?r.document.getElementById(a):r.document.createElement("iframe")).id=a,e.alwaysUseXDomainIframe||e.enableSafeFrame){fe("targetId: "+e.targetId+" is using safeFrame. Loading this ad into sandboxed iframe");var i=void 0;t.renderer_url?i="\x3c!-- renderer loading in SF--\x3e":e.isBannerMediation?i=apntag.getAdMarkup(e.targetId,e.uuid):e.isVideoMediation?i=e.adResponse.ad[P][O][N]:(i=j(e),i=""+(i=i.replace("/&/g","&amp;").replace("/</g","&lt;").replace("/>/g","&gt;").replace('/"/g',"&quot;").replace("/'/g","&#39;")));var o=e.curWindow;delete e.curWindow;var s={targetId:e.targetId,ad:i,host:r.location.protocol+"//"+r.location.host,geom:e.geom,debug:_e(),hasFocus:document.hasFocus(),hostSfSupport:e.safeframe,isMediated:e.isMediated,rendererUrl:t.renderer_url,enableMediationEvents:apntag.requests.enableMediationEvents,expandByCreative:ke(e.targetId),currentTag:e};e.safeframe.meta&&(s.meta=e.safeframe.meta),n.name=JSON.stringify(s),e.curWindow=o,e.safeframe.sandbox&&(n.sandbox="allow-forms allow-modals allow-orientation-lock allow-pointer-lock allow-popups allow-popups-to-escape-sandbox allow-presentation allow-same-origin allow-scripts")}else n.name=a;if(n.setAttribute("height",e.initialHeight),n.setAttribute("width",e.initialWidth),n.tabIndex="-1",n.width=e.initialWidth+"px",n.height=e.initialHeight+"px",n.border="0",n.hspace="0",n.vspace="0",n.marginWidth="0",n.marginHeight="0",n.style.border="0",n.scrolling="no",n.frameBorder="0",e.renderingManagement&&e.renderingManagement.sandboxAdIframe&&!n.hasAttribute("sandbox")){var d=e.renderingManagement.sandboxAttributes||[];d.length>0&&(ye("renderingManagement.sandboxAdIframe was enabled, enabling sandbox attributes: "+d.join(" ")),n.setAttribute("sandbox",d.join(" ")))}return e.customIframeProps&&Ee(e.customIframeProps,(function(e,t){n[t]=e})),n},U=function(e,t){if(t.alwaysUseXDomainIframe||t.enableSafeFrame)e.src=q+M.j.SAFE_FRAME_URL;else{var n,a=function(e){var t=void 0;try{t=e.contentWindow?e.contentWindow.document:e.contentDocument.document?e.contentDocument.document:e.contentDocument}catch(e){ve("Error getting iframe document: "+e)}return t}(e);n=j(t),a.open("text/html","replace"),a.write(n),a.close()}},L=function(e){var t=e.strategy,n=e.data,a=Me().document.createElement("iframe");a.width=0,a.height=0,a.border="0",a.hspace="0",a.vspace="0",a.tabIndex="-1",a.marginWidth="0",a.marginHeight="0",a.style.border="0",a.style.display="none",a.scrolling="no",a.frameBorder="0","WithContent"===t&&function(e,t){F(e),e.contentWindow.document.open(),e.contentWindow.document.write(t),e.contentWindow.document.close()}(a,n),"WithAttributes"===t&&function(e,t){e.src=t.src,e.id=t.id,e.sandbox=t.sandbox,F(e)}(a,n)};function F(e){var t=Me().document.getElementsByTagName("body");t.length&&t[0].appendChild(e)}function j(e){var t=e.targetId,n="";if(e.isMediated)n=e.ad.mediatedContent,fe("Invoking mediation for displaying banner ad: "+t);else if(e.adResponse&&1===e.adResponse.ads.length){n=Pe(e.adResponse.ads)[O][N]}return function(e,t,n){var a=function(e,t){if(t)return"";return'window.onerror = function(e) {\n        if(window.parent && window.parent.apntag) {\n          window.parent.apntag.recordErrorEvent(e,"'+e+'");\n          return true;\n        }\n      };'}(e,n);return'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html><head>\n    <script>inDapIF=true;\n    apntag_targetId = "'+e+'";\n    '+a+'\n    <\/script></head>\n    <body>\n    <script>\n    document.body.id = "'+e+'";\n    <\/script>\n    '+t+"\n    </body></html>"}(t,n,e.alwaysUseXDomainIframe||e.enableSafeFrame)}var W=M.r.ARRAY,z=M.r.STRING,V=M.r.FUNC,G=M.r.NUM,H=M.r.OBJ,J=Object.prototype.hasOwnProperty,Y=!1,X=M.f.DEBUG_MODE,$=M.m.UNDEFINED,K=M.e.RTB,Q=M.e.CSM,Z=M.e.SSM,ee=M.i,te=null;try{te="object"==typeof console.info&&null!==console.info?console.info:console.info.bind(window.console)}catch(e){}var ne=function(e,t,n,a){e.addEventListener?e.addEventListener(t,n,a):e.attachEvent&&e.attachEvent("on"+t,n)},ae=function(e,t,n,a){e.removeEventListener?e.removeEventListener(t,n,a):e.detachEvent&&e.detachEvent("on"+t,n)},re=function(e,t){return Object.prototype.toString.call(e)==="[object "+t+"]"},ie=function(e){return re(e,H)},oe=function(e){return re(e,V)},se=function(e){return re(e,z)},de=function(e){return re(e,W)},ce=function(e){return re(e,G)};function ue(e){return Number.isInteger?Number.isInteger(e):"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}var le=function(e){if(!e)return!0;if(de(e)||se(e))return 0===e.length;for(var t in e)if(J.call(e,t))return!1;return!0},pe=function(){return window.console&&window.console.log},ge=function(){var e=new Date;return"["+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()+":"+e.getMilliseconds()+"] "},fe=function(e){if(_e()&&pe()){var t=ge(),n=Ne()?"SAFEFRAME MESSAGE: ":"MESSAGE: ";console.log(t+n+e)}},me=function(e){if(_e()&&pe()){var t=ge(),n=Ne()?"SAFEFRAME WARN: ":"WARN: ";console.warn?console.warn(t+n+e):console.log(t+n+e)}},ve=function(e,t){if(_e()&&pe()){var n=t||"GENERAL_ERROR",a=ge(),r=Ne()?"SAFEFRAME ":"";console.error?console.error(a+r+n+": "+e):console.log(a+r+n+": "+e)}},he=function(e){_e()&&pe()&&console.timeStamp&&console.timeStamp(e)},ye=function(e,t){if(_e()&&pe()){var n=ge();if(te){t&&0!==t.length||(t="");var a=Ne()?"SAFEFRAME INFO: ":"INFO: ";te(n+a+e+(""===t?"":" : params : "),t)}}},be=function(e,t,n){var a=e.document,r=a.createElement("script");r.type="text/javascript",r.async=!0,n&&"function"==typeof n&&(r.readyState?r.onreadystatechange=function(){"loaded"!==r.readyState&&"complete"!==r.readyState||(r.onreadystatechange=null,n())}:r.onload=function(){n()}),r.src=t;var i=a.getElementsByTagName("head");return(i=i.length?i:a.getElementsByTagName("body")).length&&(i=i[0]).insertBefore(r,i.firstChild),r},we=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))},Ie=function(e,t,n){var a=void 0;if(n="anx_"+n+(new Date).getTime(),e&&t){(a=new Image).id=n,a.src=t,a.height=0,a.width=0,a.style.display="none",a.onload=function(){try{this.parentNode.removeChild(this)}catch(e){}};try{e.insertBefore(a,e.firstChild)}catch(e){ve("Error logging impression for tag: "+n+" :"+e.message)}}},Ee=function(e,t){if(!le(e)){if(oe(e.forEach))return e.forEach(t);var n=0,a=e.length;if(a>0)for(;n<a;n++)t(e[n],n,e);else for(n in e)J.call(e,n)&&t(e[n],n,e)}},_e=function(){return!!Ne()||(Me().apntag=Me().apntag||{},apntag&&!1===apntag.debug&&!1===Y&&(apntag.debug="TRUE"===xe(X).toUpperCase(),Y=!0),!(!apntag||!apntag.debug))},ke=function(e){var t=apntag.requests.tags[e],n=t&&t.initCollapsed,a=n&&n.expandBy&&Le(ee).indexOf(n.expandBy)>=0;return n&&a},Se=function(e,t){return!!e&&-1!==e.indexOf(t)},Te=function(){try{return window.top.location.search}catch(e){try{return window.location.search}catch(e){return""}}},xe=function(e,t){var n=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t||Te());return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))},Ae=function(e,t){return e.hasOwnProperty?e.hasOwnProperty(t):typeof e[t]!==$&&e.constructor.prototype[t]!==e[t]},Ce=function(e,t){if(le(e))return[];if(oe(e.map))return e.map(t);var n=[];return Ee(e,(function(a,r){n.push(t(a,r,e))})),n},De=function(e,t,n){return null==t?n:se(t)?t:ce(t)?t.toString():void me("Unsuported type for param: "+e+" required type: String")},Re=function(e,t,n,a){return null==t?a:re(t,n)?t:(me("Unsuported type for param: "+e+" required type: "+n),n===G&&(t=Number(t)),isNaN(t)?a:t)},Me=function(){return window},Pe=function(e){if(e&&e.length>0){if(e[0][K])return e[0][K];if(e[0][Q])return e[0][Q];if(e[0][Z])return e[0][Z]}},Oe=function(e){if(null===e||!(e instanceof Object))return e;var t=e instanceof Array?[]:{};for(var n in e)t[n]=Oe(e[n]);return t};function Ne(){return!(typeof $sf===$||!$sf.ext)&&!!$sf.ext.debug}var qe,Be=function(e){return M.n.UT_DIV+e.targetId},Ue=function(){return Me().document.location.protocol+"//"+M.j.CDN_ORIGIN},Le=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t},Fe=function(e,t){var n=void 0;if(oe(e))return function(){return e&&(n=e.apply(t||this,arguments),e=null),n}},je=function(e,t){var n={};return["debug","displayed","initialHeight","initialWidth","invCode","member","showTagCalled","sizes","targetId","utCalled","utDivId","utiframeId","uuid","keywords"].forEach((function(t){n[t]=e[t]})),t&&(n.on=t.on,n.off=t.off,n.modifyTag=t.modifyTag,n.setKeywords=t.setKeywords),n},We=function(e){apntag.requests.tags=apntag.requests.tags||{};var t=!0;return typeof apntag.requests.tags[e]===$&&(t=!1),t},ze=function(){apntag.requests.hasLeft=!1,Ee(apntag.requests.tags,(function(e,t){e.displayed||e.prebid||e.isMediated||(me(t+" is not displayed.",M.k.WARN),apntag.requests.hasLeft=!0)})),apntag.requests.hasLeft||fe("all Tags are displayed.")},Ve=function(e,t){if(e.viewability&&e.viewability.config){var n=e.viewability.config;"string"==typeof t&&(n=n.replace("%native_dom_id%",t),_e()&&null===document.getElementById(t)&&me("No element found in the page for the native creative "+t+", see https://docs.xandr.com/bundle/seller-tag/page/seller-tag/define-tag.html 'targetId'")),L({strategy:"WithContent",data:n})}},Ge=(qe=0,function(){return++qe});var He=Array.prototype.slice,Je=Ce(M.h,(function(e){return e})),Ye=function(){var e={},t={};function n(t,n){var a=n[0],r=He.call(n,1);fe("Emitting event for: "+t+" for ad tag: "+a),Ee(e[t],(function(e){var t="";if(null!=(t=Ae(e,"*")?e["*"]:e[a])&&"function"==typeof t)try{t.apply(null,r)}catch(e){ve("events._dispatch: Error executing event handler function: "+e.message)}}))}function a(e){return function(e,t){if(le(e))return!1;for(var n=e.length;n--;)if(e[n]===t)return!0;return!1}(Je,e)}return t.on=function(t,n,r){if(a(t)){var i={};i[n]=r,e[t]=e[t]||[],e[t].push(i)}else ve("Wrong event name : "+t+" Valid event names :"+Je)},t.emit=function(e){var t=He.call(arguments,1);n(e,t)},t.off=function(t,n,a){le(e[t])||Ee(e[t],(function(e){"*"===n&&null!==e[Object.keys(e)[0]]&&void 0!==e[Object.keys(e)[0]]?void 0!==a&&Object.values(e)!==a||(e[Object.keys(e)[0]]=null):null!==e[n]&&void 0!==e[n]&&(void 0!==a&&e[n]!==a||(e[n]=null))}))},t.get=function(){return e},t}(),Xe="https:"===function(){try{return Me().top.document.location.protocol}catch(e){return Me().document.location.protocol}}()?"https:":"http:",$e=[],Ke=!1,Qe=Xe+M.j.VIDEO_MEDIATION_JS,Ze=Xe+M.j.BANNER_MEDIATION_JS,et=M.s.AD_TYPE,tt=M.b.BANNER,nt=M.b.VIDEO;var at=function(e,t,n,a){e===nt&&(null!==t&&$e.push(t),Ke&&window.APNVideo_AstMediationManager?Ee($e,(function(e){if(!e.called)try{window.APNVideo_AstMediationManager.selectAd(e.uuid,e,n,a),e.called=!0}catch(e){ve("Error invoking video mediation","mediationmanager.js",e)}})):(be(window,Qe,(function(){at(nt,null,n,a)})),Ke=!0))},rt=function(e){return e.isMediated||e.isRtbVideoFallback?e.adResponse.ad:e.adResponse.ads[0]},it=function(e){var t=e.content_source,n=e.ad_type;if(t)return e[t][n]},ot=[],st=M.f.AST_OVERRIDE,dt=st.BASE,ct=dt+st.DIV,ut=dt+st.INDEX,lt=dt+st.TAG_ID,pt=dt+st.INV_CODE,gt=void 0;function ft(e){return xe(e,gt)}function mt(e,t,n){var a=Number(t);if(isNaN(a))ve("Force Creative must be a number");else{e.force_creative_id=a;var r=function(e,t){var n=null;return Ee(t,(function(t){t.uuid===e.uuid&&(n=t.targetId)})),n}(e,n);fe("Force Creative in use for targetId: "+r)}}var vt=function(e){function t(){var t=function(){var t=[],n=void 0;do{try{n=n?n.parent:e;try{t.push({referrer:n.document.referrer||null,location:n.location.href||null,isTop:n===e.top})}catch(a){t.push({referrer:null,location:null,isTop:n===e.top}),me("Trying to access cross domain iframe. Continuing without referrer and location")}}catch(e){return t.push({referrer:null,location:null,isTop:!1}),t}}while(n!==e.top);return t}(),n=function(){try{if(!e.location.ancestorOrigins)return;return e.location.ancestorOrigins}catch(e){}}();if(n)for(var a=0,r=n.length;a<r;a++)t[a].ancestor=n[a];return t}return function(){try{var e=t(),n=e.length-1,a=null!==e[n].location||n>0&&null!==e[n-1].referrer,r=function(e){var t=[],n=null,a=null,r=null,i=null,o=null,s=null,d=void 0;for(d=e.length-1;d>=0;d--){try{a=e[d].location}catch(e){}if(a)n=encodeURIComponent(a),t.push(n),s||(s=n);else if(0!==d){r=e[d-1];try{i=r.referrer,o=r.ancestor}catch(e){}i?(n=encodeURIComponent(i),t.push(n),s||(s=n)):o?(n=encodeURIComponent(o),t.push(n),s||(s=n)):t.push(null)}else t.push(null)}return{stack:t,detectedRefererUrl:s}}(e);return{referer:r.detectedRefererUrl,reachedTop:a,numIframes:n,stack:r.stack}}catch(e){}}}(window),ht={STRICT:"strict",RELAXED:"relaxed",OFF:"off"},yt=[];function bt(e){var t,n=ht.STRICT;return void 0!==(t=e)&&(ie(t)||(ve("Invalid schain object found:  the schain config will not be used as it is not an object."),0))?(se(e.validation)&&-1!==yt.indexOf(e.validation)&&(n=e.validation),n===ht.OFF||function(e,t){var n=["complete","ver","ext","nodes"],a="Detected something wrong within the schain config:",r="";function i(e){r+="\n"+e}function o(){t===ht.STRICT?ve(a+r):me(a+r)}if(!ie(e)&&(i("schain.config  should be an object"),o(),t===ht.STRICT))return!1;if(Object.keys(e).forEach((function(e){-1===n.indexOf(e)&&i("schain.config."+e+"  is not a valid schain property")})),ce(e.complete)&&ue(e.complete)||i("schain.config.complete  should be an Integer"),se(e.ver)||i("schain.config.ver  should be a string"),Ae(e,"ext")&&(ie(e.ext)||i("schain.object.ext  should be an object")),de(e.nodes)){var s=["asi","sid","hp","rid","name","domain","ext"];e.nodes.forEach((function(e,t){ie(e)?(Object.keys(e).forEach((function(e){-1===s.indexOf(e)&&i("schain.config.nodes["+t+"]."+e+"  is not a valid schain property")})),se(e.asi)||i("schain.config.nodes["+t+"].asi  should be a string"),se(e.sid)||i("schain.config.nodes["+t+"].sid  should be a string"),ce(e.hp)&&ue(e.hp)||i("schain.config.nodes["+t+"].hp  should be an Integer"),Ae(e,"rid")&&(se(e.rid)||i("schain.config.nodes["+t+"].rid  should be a string")),Ae(e,"name")&&(se(e.name)||i("schain.config.nodes["+t+"].name  should be a string")),Ae(e,"domain")&&(se(e.domain)||i("schain.config.nodes["+t+"].domain  should be a string")),Ae(e,"ext")&&(ie(e.ext)||i("schain.config.nodes["+t+"].ext  should be an object"))):i("schain.config.nodes["+t+"]  should be an object")}))}else if(i("schain.config.nodes  should be an Array"),o(),t===ht.STRICT)return!1;return!(r.length>0&&(o(),t===ht.STRICT))}(e.config,n)?e.config:(ve("Invalid schain object found:  due to 'strict' validation setting, the schain object will not be passed.  See the above error for details."),null)):null}Ee(ht,(function(e){return yt.push(e)}));var wt=M.r.STRING,It=M.r.NUM,Et=M.r.BOOL,_t=M.f.AST_DONGLE,kt=M.f.AST_TOOLKIT,St=M.f.AST_TEST,Tt=M.f.AST_DEBUG_MEMBER,xt=M.f.AST_DEBUG_BIDDER;function At(e){var t=[];return Ee(e,(function(e,n){if(de(e)){var a=[];Ee(e,(function(e){(e=De("keywords."+n,e))&&a.push(e)})),e=a}else{if(e=De("keywords."+n,e),!se(e))return;e=[e]}var r={key:n,value:e};t.push(r)})),t}var Ct=function(e){var t=[],n={};if(de(e)&&2===e.length&&!de(e[0]))n.width=parseInt(e[0],10),n.height=parseInt(e[1],10),t.push(n);else if("object"==typeof e&&null!==e)for(var a=0;a<e.length;a++){var r=e[a];(n={}).width=parseInt(r[0],10),n.height=parseInt(r[1],10),t.push(n)}return t},Dt=function(e,t,n,a){var r={};e.disablePsa&&Ee(e.tags,(function(e){e.disablePsa=!0})),e.msft&&(r.msft=e.msft),e.gdpr_consent&&(r.gdpr_consent=e.gdpr_consent),e.gpp_consent&&(r.privacy=e.gpp_consent),e.us_privacy&&(r.us_privacy=e.us_privacy),e.geoOverride&&(r.geo_override={country_code:e.geoOverride.countryCode,postal_code:e.geoOverride.zip});var i=[],o=0;Ee(e.tags,(function(e){if(!e.utCalled&&e.member===t&&function(e){if(!a)return!0;var t=!1;return Ee(a,(function(n){e.targetId===n&&(t=!0)})),t}(e)){var n=function(e){var t={};if(e.uuid=we(),!le(e.sizes)){var n=Ct(e.sizes);le(n)||(t.sizes=n,t.primary_size=n[0])}if(!le(e.privateSizes)){var a=Ct(e.privateSizes);le(a)||(t.private_sizes=a)}if(e.supplyType&&se(e.supplyType)&&(t.supply_type=e.supplyType),e.pubClick&&se(e.pubClick)&&(t.pubclick={url:e.pubClick}),e.pubClickEnc&&se(e.pubClickEnc)&&(t.pubclickenc={url:e.pubClickEnc}),e.reserve&&(ce(e.reserve)||de(e.reserve))&&(t.reserve=e.reserve),e.extInvCode&&se(e.extInvCode)&&(t.ext_inv_code=e.extInvCode),t.uuid=e.uuid,e.tagId&&(t.id=e.tagId),e.formats&&(t.formats=e.formats),e.position&&("above"===e.position?t.position=1:"below"===e.position?t.position=2:t.position=0),e.invCode&&(t.code=e.invCode),e.prebid&&(t.prebid=e.prebid),e.externalImpId&&(t.external_imp_id=e.externalImpId),!0===e.allowSmallerSizes?t.allow_smaller_sizes=!0:t.allow_smaller_sizes=!1,!0===e.disablePsa&&(t.disable_psa=!0),e.allowedFormats&&(t.ad_types=e.allowedFormats),!0!==e.usePmtRule&&!1!==e.usePmtRule||(t.use_pmt_rule=e.usePmtRule),se(e.globalPlacementId)&&(t.gpid=e.globalPlacementId),!le(e.video)){var r=e.video,i={};r.id&&(i.id=r.id),le(r.mimes)||(i.mimes=r.mimes),r.maxDuration&&(i.maxduration=r.maxDuration),r.minDuration&&(i.minduration=r.minDuration),r.startDelay&&(i.startdelay=r.startDelay),r.skippable&&(i.skippable=r.skippable),r.skipOffset&&(i.skipoffset=r.skipOffset),le(r.playbackMethod)||(i.playback_method=r.playbackMethod),le(r.frameworks)||(i.frameworks=r.frameworks),t.video=i}if(!le(e.native)){var o=e.native,s={};o.renderer_id&&(s.renderer_id=o.renderer_id),o.placement_type&&(s.placement_type=o.placement_type);var d={};o.id&&(d.id=o.id),o.title&&(d.title=o.title),o.body&&(d.description=o.body),o.sponsoredBy&&(d.sponsored_by=o.sponsoredBy),o.image&&(d.main_image=o.image,le(d.main_image.sizes)&&(d.main_image.sizes=[{}])),o.icon&&(d.icon=o.icon,le(d.icon.sizes)&&(d.icon.sizes=[{}])),o.cta&&(d.ctatext=o.cta),o.desc2&&(d.desc2=o.desc2),o.rating&&(d.rating=o.rating),o.displayUrl&&(d.displayurl=o.displayUrl),o.likes&&(d.likes=o.likes),o.downloads&&(d.downloads=o.downloads),o.price&&(d.price=o.price),o.salePrice&&(d.saleprice=o.salePrice),o.phone&&(d.phone=o.phone),o.address&&(d.address=o.address),o.video&&(d.video={required:o.video.required||!1,min_duration:o.video.minDuration||0,max_duration:o.video.maxDuration}),o.privacySupported&&(d.privacy_supported=!0),o.customTitle1&&(d.customtitle1=o.customTitle1),o.customTitle2&&(d.customtitle2=o.customTitle2),o.customTitle3&&(d.customtitle3=o.customTitle3),o.customTitle4&&(d.customtitle4=o.customTitle4),o.customTitle5&&(d.customtitle5=o.customTitle5),o.customBody1&&(d.custombody1=o.customBody1),o.customBody2&&(d.custombody2=o.customBody2),o.customBody3&&(d.custombody3=o.customBody3),o.customBody4&&(d.custombody4=o.customBody4),o.customBody5&&(d.custombody5=o.customBody5),o.customCta1&&(d.customctatext1=o.customCta1),o.customCta2&&(d.customctatext2=o.customCta2),o.customCta3&&(d.customctatext3=o.customCta3),o.customCta4&&(d.customctatext4=o.customCta4),o.customCta5&&(d.customctatext5=o.customCta5),o.customDisplayUrl1&&(d.customdisplayurl1=o.customDisplayUrl1),o.customDisplayUrl2&&(d.customdisplayurl2=o.customDisplayUrl2),o.customDisplayUrl3&&(d.customdisplayurl3=o.customDisplayUrl3),o.customDisplayUrl4&&(d.customdisplayurl4=o.customDisplayUrl4),o.customDisplayUrl5&&(d.customdisplayurl5=o.customDisplayUrl5),o.customSocialUrl1&&(d.customsocialurl1=o.customSocialUrl1),o.customSocialUrl2&&(d.customsocialurl2=o.customSocialUrl2),o.customSocialUrl3&&(d.customsocialurl3=o.customSocialUrl3),o.customSocialUrl4&&(d.customsocialurl4=o.customSocialUrl4),o.customSocialUrl5&&(d.customsocialurl5=o.customSocialUrl5),o.customImage1&&(d.customimage1=o.customImage1),o.customImage2&&(d.customimage2=o.customImage2),o.customImage3&&(d.customimage3=o.customImage3),o.customImage4&&(d.customimage4=o.customImage4),o.customImage5&&(d.customimage5=o.customImage5),o.customIcon1&&(d.customicon1=o.customIcon1),o.customIcon2&&(d.customicon2=o.customIcon2),o.customIcon3&&(d.customicon3=o.customIcon3),o.customIcon4&&(d.customicon4=o.customIcon4),o.customIcon5&&(d.customicon5=o.customIcon5),o.customSocialIcon1&&(d.customsocialicon1=o.customSocialIcon1),o.customSocialIcon2&&(d.customsocialicon2=o.customSocialIcon2),o.customSocialIcon3&&(d.customsocialicon3=o.customSocialIcon3),o.customSocialIcon4&&(d.customsocialicon4=o.customSocialIcon4),o.customSocialIcon5&&(d.customsocialicon5=o.customSocialIcon5),d&&(s.layouts=[d]),t.ad_types=t.ad_types||[],-1===t.ad_types.indexOf("native")&&t.ad_types.push("native"),t.native=s}if(!le(e.keywords)){var c=At(e.keywords);t.keywords=c}if(e.forceCreativeId){var u=Number(e.forceCreativeId);isNaN(u)?ve("Force Creative must be a number"):(t.force_creative_id=u,fe("Force Creative in use for targetId: "+e.targetId))}return e.nobidIfUnsold&&(t.nobid_if_unsold=!0),e.trafficSourceCode&&(t.traffic_source_code=e.trafficSourceCode.toString()),e.customPubLog&&(se(e.customPubLog)?t.custom_pub_log=e.customPubLog:ve("customPubLog must be a string")),t}(e);e.utCalled=!0,e.tagNumber=o,o++,i.push(n)}})),function(e,t,n){if(Se(gt||Te(),dt)){var a=void 0,r=void 0,i=void 0,o=void 0,s=void 0,d=void 0;if(!le(ft(ut)))for(ot=ft(ut).split(","),a=0;a<ot.length;a++){s=ot[a].split(":");var c=Number(s[0]);if(isNaN(c)||void 0===t[c])ve("Invalid ast_override value for index : "+c);else{d=null;var u=null;for(o=0;o<n.length;o++)o===c&&(u=n[o].uuid);for(i=0;i<t.length;i++)t[i].uuid===u&&mt(t[i],s[1],e)}}if(!le(ft(ct)))for(ot=ft(ct).split(","),a=0;a<ot.length;a++){s=ot[a].split(":");var l=null,p=Object.keys(e);for(i=0;i<p.length;i++)s[0]===p[i]&&(l=e[p[i]].uuid);if(l)for(r=0;r<t.length;r++)t[r].uuid===l&&mt(t[r],s[1],e);else ve("Invalid ast_override value for target div id : "+s[0])}if(!le(ft(lt)))for(ot=ft(lt).split(","),a=0;a<ot.length;a++){s=ot[a].split(":");var g=!1;for(r=0;r<t.length;r++)(d=t[r]).id===Number(s[0])&&(mt(d,s[1],e),g=!0);g||ve("Invalid ast_override value for tag id : "+s[0])}if(!le(ft(pt)))for(ot=ft(pt).split(","),a=0;a<ot.length;a++){s=ot[a].split(":");var f=!1;for(r=0;r<t.length;r++)(d=t[r]).code===s[0]&&(mt(d,s[1],e),f=!0);f||ve("Invalid ast_override value for invCode : "+s[0])}}}(e.tags,i,n);var s=vt(),d={rd_ref:s.referer,rd_top:s.reachedTop,rd_ifs:s.numIframes,rd_stk:s.stack.join(",")};if(e.pageUrlOverride){var c=!!(navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(ipad|iphone|ipod)/g)),u=!(!window.webkit||!window.webkit.messageHandlers);(c||u)&&(d.rd_can=e.pageUrlOverride)}r.referrer_detection=d,r.tags=i,r.uuid=we(),r.member_id=t,r.sdk={source:"ast",version:"0.60.1"};var l=null;if(le(e.keywords)?le(e.targetingParams)||(l=At(e.targetingParams),r.keywords=l):(l=At(e.keywords),r.keywords=l),!le(e.user)&&(r.user=function(e){var t={};if(!le(e)){if(e.externalUid&&se(e.externalUid)&&(t.external_uid=e.externalUid),de(e.segments)){var n=[];Ee(e.segments,(function(e){ce(e)?n.push({id:e}):ie(e)&&e.id&&ce(e.id)&&e.value&&ce(e.value)&&n.push(e)})),t.segments=n}var a=Re("user.age",e.age,It);t.age=a;var r=Re("user.gender",e.gender,It);t.gender=r;var i=Re("user.language",e.language,wt);t.language=i;var o=Re("user.dnt",e.dnt,Et);t.dnt=o;var s=Re("user.coppa",e.coppa,Et);t.coppa=s}return t}(e.user),!le(e.user.userIds))){var p=function(e){function t(e,t,n,a){t&&(a?e.push({source:n,id:t,rti_partner:a}):e.push({source:n,id:t}))}var n=[];return de(e)?Ee(e,(function(e){if(ie(e)&&se(e.type)&&(se(e.id)||de(e.eids)))switch(e.type.toLowerCase()){case"criteo":t(n,e.id,"criteo.com",null);break;case"ttd":t(n,e.id,"adserver.org","TDID");break;case"netid":t(n,e.id,"netid.de",null);break;case"liveramp":t(n,e.id,"liveramp.com",null);break;case"uid2":t(n,e.id,"uidapi.com","UID2");break;case"extendedids":Ee(e.eids,(function(e){se(e.source)&&se(e.id)&&n.push({source:e.source,id:e.id})}));break;default:n.push(e)}else me("Invalid userId object")})):me("Invalid userIds"),{eids:n}}(e.user.userIds).eids;r.eids=p}if(!le(e.content)){var g={},f=Re("content.language",e.content.language,wt);g.language=f,r.request_content=g}if(!le(e.schainConfig)){var m=bt(e.schainConfig);m&&(r.schain=m)}le(e.device)||(r.device=function(e){var t={},n=e.device;if(!le(n)){le(n.useragent)||(t.useragent=n.useragent),le(n.geo)||(t.geo=n.geo),le(n.ip)||(t.ip=n.ip),le(n.deviceType)||(t.devicetype=n.deviceType),le(n.make)||(t.make=n.make),le(n.model)||(t.model=n.model),le(n.os)||(t.os=n.os),le(n.osVersion)||(t.os_version=n.osVersion),le(n.carrier)||(t.carrier=n.carrier);var a=Re("device.connectionType",n.connectionType,It);t.connectiontype=a,le(n.mcc)||(t.mcc=n.mcc),le(n.mnc)||(t.mnc=n.mnc),le(n.lmt)||(t.lmt=n.lmt),le(n.deviceId)||(t.device_id=n.deviceId);var r=Re("device.devTime",n.devTime,It);t.devtime=r}return t}(e)),le(e.app)||(r.app=function(e){var t={},n=e.app;return le(n)||le(n.appid)||(t.appid=n.appid),t}(e)),le(e.site)||(r.site=function(e){var t={},n=e.site;return le(n)||le(n.id)||(t.id=n.id),t}(e)),e.publisherId&&(r.publisher_id=e.publisherId),e.auctionTimeout&&(r.auction_timeout_ms=e.auctionTimeout),r.tags=i;var v=xe(_t)||apntag.dongle;v&&!apntag.dongle&&(apntag.dongle=v),((xe(kt)||apntag.toolkit)&&v||!le(e.toolkit))&&(r.toolkit={enabled:!0,dongle:v||e.toolkit.dongle});var h=xe(Tt);h&&""!==h&&(apntag.debug_member=h);var y=xe(xt);y&&""!==y&&(apntag.debug_bidder=y);var b="TRUE"===xe(St).toUpperCase();if(b&&""!==b&&(apntag.requests.test=b),apntag.debug&&!le(apntag.dongle)){var w="";apntag.debug_member&&(w=apntag.debug_member);var I=function(e,t,n){var a={};return apntag.debug&&!le(t)&&(a.enabled=!0,e&&(a.member_id=Number(e)),t&&(a.dongle=String(t)),n&&(a.bidder_id=Number(n)),a.debug_timeout=1e3),a}(w,apntag.dongle,apntag.debug_bidder);r.debug=I}return r},Rt={};function Mt(e,t){var n=function(e){var t={};return Ee(apntag.requests.tags,(function(n){e===n.uuid&&(t=n)})),t}(e.uuid);if(this.targetId=n.targetId,this.uuid=e.uuid,e.nobid)return this.nobid=!0,this.tagId=e.tag_id,this.auctionId=e.auction_id,this;e.ads&&e.ads.length,this.tagId=e.tag_id,this.auctionId=e.auction_id;var a=t||e.ads[0],r=this;Ee(Nt(a),(function(e,t){r[t]=e}));var i=void 0,o=void 0,s=function(e){var t=[];le(e.sizes)||(t=Ct(e.sizes));return t}(n);de(s)&&s[0]&&(i=s[0].height,o=s[0].width),a.msft&&(this.msft=a.msft);var d=a.content_source?a.content_source:"rtb";if(a[d]&&a[d].banner)this.banner={width:a[d].banner.width,height:a[d].banner.height,content:a[d].banner.content,trackers:a[d].trackers},i=a[d].banner.height,o=a[d].banner.width;else if(a.rtb&&a.rtb.video){var c=a.rtb.video;this.video={duration:c.duration_ms,playbackMethods:c.playback_methods,frameworks:c.frameworks,content:c.content,trackers:a.rtb.trackers}}else if(a.rtb&&a.rtb[M.l.NATIVE]){var u=a.rtb[M.l.NATIVE];this[M.l.NATIVE]=qt(u),n.trackingManagement&&n.trackingManagement.native&&n.trackingManagement.native.loadViewScriptAt===M.c.NATIVE_VIEWABILITY.IMPRESSION||(ye("Loading native viewability script during adResponse phase"),Ve(a,this.targetId)),a.renderer_id&&(this.renderer_id=a.renderer_id),a.renderer_url&&(this.renderer_url=a.renderer_url)}this.height=i,this.width=o}var Pt=function(e,t){if(!e||!e.uuid)return{};if(Rt[e.uuid]&&!t)return Rt[e.uuid];try{var n=function(e,t){return new Mt(e,t)}(e,t);return t||(Rt[e.uuid]=n),n}catch(e){ve("adManager.getAdObj: Error trying to instantiate new adObj: "+e.message)}};var Ot=function(e,t,n,a){return{code:a,errMessage:e||n.message,exception:n,targetId:t}};function Nt(e){return{adType:e.ad_type,buyerMemberId:e.buyer_member_id,source:e.content_source,cpm:e.cpm,cpm_publisher_currency:e.cpm_publisher_currency,publisher_currency_code:e.publisher_currency_code,creativeId:e.creative_id,mediaSubtypeId:e.media_subtype_id,mediaTypeId:e.media_type_id,brandCategoryId:e.brand_category_id,dealId:e.deal_id,isExclusive:e.is_sov,isRoadblock:e.is_roadblock}}function qt(e){return{type:e.type,title:e.title,body:e.desc,desc2:e.desc2,fullText:e.full_text,icon:e.icon,image:e.main_img,cta:e.ctatext,sponsoredBy:e.sponsored,impressionTrackers:e.impression_trackers,clickTrackers:e.link&&e.link.click_trackers,clickUrl:e.link&&e.link.url,clickFallbackUrl:e.link&&e.link.fallback_url,javascriptTrackers:e.javascript_trackers,video:e.video,privacyLink:e.privacy_link,rating:e.rating,displayUrl:e.displayurl,likes:e.likes,downloads:e.downloads,price:e.price,salePrice:e.saleprice,phone:e.phone,address:e.address,customTitle1:e.title1,customTitle2:e.title2,customTitle3:e.title3,customTitle4:e.title4,customTitle5:e.title5,customBody1:e.body1,customBody2:e.body2,customBody3:e.body3,customBody4:e.body4,customBody5:e.body5,customCta1:e.ctatext1,customCta2:e.ctatext2,customCta3:e.ctatext3,customCta4:e.ctatext4,customCta5:e.ctatext5,customDisplayUrl1:e.displayurl1,customDisplayUrl2:e.displayurl2,customDisplayUrl3:e.displayurl3,customDisplayUrl4:e.displayurl4,customDisplayUrl5:e.displayurl5,customSocialUrl1:e.socialurl1,customSocialUrl2:e.socialurl2,customSocialUrl3:e.socialurl3,customSocialUrl4:e.socialurl4,customSocialUrl5:e.socialurl5,customImage1:e.image1,customImage2:e.image2,customImage3:e.image3,customImage4:e.image4,customImage5:e.image5,customIcon1:e.icon1,customIcon2:e.icon2,customIcon3:e.icon3,customIcon4:e.icon4,customIcon5:e.icon5,customSocialIcon1:e.socialicon1,customSocialIcon2:e.socialicon2,customSocialIcon3:e.socialicon3,customSocialIcon4:e.socialicon4,customSocialIcon5:e.socialicon5}}var Bt,Ut,Lt=(Bt=void 0,Ut={},{getInstance:function(){return Bt||(Bt={add:function(e,t){Ut[e]=t},getIframe:function(e){return Ae(Ut,e)?Ut[e]:null},getIframes:function(){return Ut},resetInstance:function(){Ut={}},removeIframe:function(e){return Ae(Ut,e)?(delete Ut[e],Ut):null}}),Bt}}),Ft=window.document,jt="auto",Wt="scroll",zt="getAttribute",Vt="setAttribute",Gt="removeAttribute",Ht=window.Number,Jt=Ht&&Ht.MAX_VALUE,Yt=-1*Jt,Xt="toLowerCase",$t="toFixed",Kt="length",Qt="overflow",Zt=window.String,en=window.Math,tn=Math.max,nn=Math.min,an=Math.round,rn=window,on=window.navigator,sn=on.userAgent||"",dn=!(!window.ActiveXObject&&"ActiveXObject"in window)&&rn&&"ActiveXObject"in rn,cn=function(){var e,t={};t.ie=t.opera=t.gecko=t.webkit=t.safari=t.chrome=t.air=t.ipod=t.ipad=t.iphone=t.android=t.webos=t.silk=t.nodejs=t.phantomjs=0,t.mobile=t.ios=t.caja=on&&on.cajaVersion;var n=sn;n&&(Sn(/KHTML/,n)&&(t.webkit=1),Sn(/IEMobile|XBLWP7/,n)&&(t.mobile="windows"),Sn(/Fennec/,n)&&(t.mobile="gecko"),(e=kn(n,/AppleWebKit\/([^\s]*)/,1))&&(t.webkit=_n(e),t.safari=t.webkit,Sn(/PhantomJS/,n)&&(e=kn(n,/PhantomJS\/([^\s]*)/,1))&&(t.phantomjs=_n(e)),Sn(/ Mobile\//,n)||Sn(/iPad|iPod|iPhone/,n)?(t.mobile="Apple",e=(e=kn(n,/OS ([^\s]*)/,1))&&_n(e.replace("_",".")),t.ios=e,t.ipad=t.ipod=t.iphone=0,(e=kn(n,/iPad|iPod|iPhone/,0))&&(t[e[Xt]()]=t.ios)):((e=kn(n,/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/,0))&&(t.mobile=e),Sn(/webOS/,n)&&(t.mobile="WebOS",(e=kn(n,/webOS\/([^\s]*);/,1))&&(t.webos=_n(e))),Sn(/ Android/,n)&&(t.mobile="Android",(e=kn(n,/Android ([^\s]*);/,1))&&(t.android=_n(e))),Sn(/Silk/,n)&&(e=kn(n,/Silk\/([^\s]*)\)/,1))&&(t.silk=_n(e))),(e=n.match(/(Chrome|CrMo)\/([^\s]*)/))&&e[1]&&e[2]?(t.chrome=_n(e[2]),t.safari=0,"CrMo"===e[1]&&(t.mobile="chrome")):(e=kn(n,/AdobeAIR\/([^\s]*)/))&&(t.air=e[0])),t.webkit||((e=kn(n,/Opera[\s\/]([^\s]*)/,1))?(t.opera=_n(e),(e=kn(n,/Opera Mini[^;]*/,0))&&(t.mobile=e)):(e=kn(n,/MSIE\s([^;]*)/,1))?t.ie=_n(e):(e=kn(n,/Gecko\/([^\s]*)/))&&(t.gecko=1,(e=kn(n,/rv:([^\s\)]*)/,1))&&(t.gecko=_n(e)))));return t}(),un=cn.ie||0,ln=cn.webkit||0,pn=cn.gecko||0,gn=cn.opera||0,fn=0,mn={},vn="clientWidth",hn="clientHeight";function yn(e){var t,n,a,r,i,o,s,d,c,u={t:0,l:0,r:0,b:0,w:0,h:0,z:0},l="getBoundingClientRect",p=0,g=0,f=0,m=0,v=!1,h=Dn(e)||rn.document,y=h.compatMode,b=h.documentMode||0;if(bn(e))try{if(i=xn(e),t=Rn(e),n=Bn(e),u.l=e.offsetLeft||0,u.t=e.offsetTop||0,a=e,r=null,v=pn||ln>519,!(e===t)&&e[l])dn&&(!b||b>0&&b<8||"BackCompat"===y)&&(s=t.clientLeft,d=t.clientTop),c=e[l](),u.t=c.top,u.l=c.left,(s||d)&&(u.l-=s,u.t-=d),(n.y||n.x)&&(!cn.ios||cn.ios>=4.2)&&(u.l+=n.x,u.t+=n.y);else{for(;(a=a.offsetParent)&&bn(a)&&r!==a;)s=a.offsetLeft,d=a.offsetTop,u.t+=d,u.l+=s,v&&(u=An(a,u)),r=a;if("fixed"!=i.position){for(a=e,r=null;(a=a.parentNode)&&bn(a)&&r!==a&&a!=t;)p=a.scrollTop,g=a.scrollLeft,pn&&"visible"!=(o=xn(a))[Qt]&&(u=An(a,u,o)),(p||g)&&(u.l-=g,u.t-=p),r=a;u.l+=n.x,u.t+=n.y}else u.l+=n.x,u.t+=n.y}e==t?(m=e[hn],f=e[vn]):(m=e.offsetHeight,f=e.offsetWidth),u.b=u.t+m,u.r=u.l+f,u.w=tn(f,0),u.h=tn(m,0),u.z=i.zIndex}catch(e){u={t:0,l:0,r:0,b:0,w:0,h:0,z:0}}return u}function bn(e){return 1===wn(e)}function wn(e){return Pn(e&&e.nodeType,-1)}function In(e){return!(!(e=En(e))||-1!=e.search(/\D+/g))||(!(!e||-1==e.search(/px/gi))||void 0)}function En(e){var t=typeof e;return"string"==t?e:"number"!=t||e?"object"==t&&e&&e.join?e.join(""):!1===e?"false":!0===e?"true":e?Zt(e):"":"0"}function _n(e){var t=0;return parseFloat(e.replace(/\./g,(function(){return 1==t++?"":"."})))}function kn(e,t,n){var a=e&&e.match(t);return null==n?a:a&&a[n]||null}function Sn(e,t){return e.test(t)}function Tn(e){var t,n=null;try{e&&((n=e.parentWindow||e.defaultView||null)||(n=(t=Dn(e))&&(t.parentWindow||t.defaultView)||null))}catch(e){n=null}return n}function xn(e){var t;if(Tn(e).getComputedStyle)try{t=Tn(e).getComputedStyle(e,null)}catch(e){t=null}else try{t=e.currentStyle}catch(e){t=null}return t}function An(e,t,n){var a=0,r=0;return(n=n||xn(e))&&(a=n.borderTopWidth,r=n.borderLeftWidth,a=In(a)?Pn(a,0):0,r=In(r)?Pn(r,0):0,pn&&/^t(?:able|d|h|r|head|foot)$/i.test(Nn(e))&&(a=r=0)),(t=t||{t:0,l:0}).t+=a,t.l+=r,t}function Cn(e){return e&&(e.parentNode||e.parentElement)}function Dn(e){var t=null;try{e&&(t=9==wn(e)?e:e.document||e.ownerDocument||null)}catch(e){t=null}return t}function Rn(e){var t=e&&Dn(e)||Ft,n=t.compatMode,a=t.documentElement;return n&&!gn&&"CSS1Compat"!=n&&(a=t.body),a}function Mn(e){var t,n,a,r,i=[-1,-1,-1,-1],o=["clipTop","clipRight","clipBottom","clipLeft"],s=0;if(!e)return i;if(un)for(;n=o[s];)In(t=e[n])&&(t=Pn(t,-1))>=0&&(i[s]=t),s++;else if((t=e.clip)&&-1!=t.search(/\d+/g))for(r=(i=(i=(t=t.replace(/\w+\(([^\)]*?)\)/g,"$1")).split(" "))[Kt]<=1?i.split(","):i)[Kt],s=0;r--;)In(a=i[s])?i[s]=Pn(a,-1):i[s]=-1,s++;return i}function Pn(e,t,n,a){if("number"!=typeof e)try{e=e?parseFloat(e):Ht.NaN}catch(t){e=Ht.NaN}return null==a&&(a=Jt),null==n&&(n=Yt),(isNaN(e)||e<n||e>a)&&null!=t?t:e}function On(e,t){var n=!1,a=e&&e.nodeType||-1,r=t&&t.nodeType||-1;if(1==a&&-1!=r)if(e.contains)if(gn||1==r)n=e.contains(t);else for(;t;){if(e===t){n=!0;break}t=t.parentNode}else e.compareDocumentPosition&&(n=e===t||!!(16&e.compareDocumentPosition(t)));return n}function Nn(e){return e&&1==e.nodeType&&e.tagName[Xt]()||""}function qn(e,t,n){try{arguments[Kt]>2?null===n?e[Gt](t):(n=En(n),"class"==t[Xt]()?e.className=n:e[Vt](t,n)):n=En(e[zt](t))}catch(e){n=""}return n}function Bn(e){var t,n,a,r,i={x:0,y:0,w:0,h:0},o={scrollLeft:0,scrollTop:0,scrollWidth:0,scrollHeight:0},s=0,d=0;return n=(t=Dn(e)||Ft).documentElement||o,r=t.body||o,(a=t.defaultView)&&(s=Pn(a.pageXOffset,0),d=Pn(a.pageYOffset,0)),i.x=tn(n.scrollLeft,r.scrollLeft,s),i.y=tn(n.scrollTop,r.scrollTop,d),i.w=tn(n.scrollWidth,r.scrollWidth,0),i.h=tn(n.scrollHeight,r.scrollHeight,0),i}function Un(e,t,n){var a,r,i,o,s,d,c,u,l,p,g,f,m,v,h,y,b,w,I,E,_,k,S,T,x,A,C,D,R,M,P,O,N,q,B,U=e&&Cn(e),L=Rn(e),F=yn(e),j=yn(L),W=Bn(L),z=function(e){var t=Rn(e),n=0,a=0;return t&&(n=t.scrollWidth||0,a=t.scrollHeight||0),{t:0,l:0,b:a,r:n,w:n,h:a}}(e),V={t:0,l:0,r:0,b:0,w:0,h:0},G={t:0,l:0,r:0,b:0,xs:0,ys:0,xiv:0,yiv:0,iv:0,w:0,h:0},H=[],J=!1,Y={left:null,right:null,top:null,bottom:null};if(t=t&&"object"==typeof t?t:{},U)for(a=j.t,r=j.l,i=j.r,o=j.b;(c=xn(U))&&("block"!=c.display&&"absolute"!=c.position&&"none"==c.float&&"none"==c.clear||(J=U==L,p=(q=yn(U)).t,g=q.l,f=q.r,m=q.b,E=c[Qt+"X"],_=c[Qt+"Y"],k=c[Qt],S=J?[-1,-1,-1,-1]:Mn(c),B=!1,J?(v=W.w,b=W.h):(v=U.scrollWidth,b=U.scrollHeight),h=U.offsetWidth,w=U.offsetHeight,y=U[vn],I=U[hn],!d&&h>y&&(d=h-y),!s&&w>I&&(s=w-I),J?(v>y&&((g=0)>r&&(r=g),(f=(rn.innerWidth||h)+W.x)<i&&(i=f)),b>I&&((p=0)>a&&(a=p),(m=(rn.innerHeight||w)+W.y)<o&&(o=m))):(d&&f-g==h&&(f-=d),s&&m-p==w&&(m-=s),"hidden"!=E&&E!=Wt&&E!=jt&&"hidden"!=k&&k!=Wt&&k!=jt||(g>r&&(r=g,Y.left=U),f<i&&(i=f,Y.right=U),(E==Wt||k==Wt||(E==jt||k==jt)&&v>y)&&(H.push(U),B=!0)),S[3]>0&&(D=g+S[3])>r&&(r=D,Y.left=U),S[1]>0&&(R=f+S[1])<i&&(i=R,Y.right=U),"hidden"!=_&&_!=Wt&&_!=jt&&"hidden"!=k&&k!=Wt&&k!=jt||(p>a&&(a=p,Y.top=U),m<o&&(o=m,Y.bottom=U),B||(_==Wt||k==Wt||(_==jt||k==jt)&&b>I)&&(H.push(U),B=!0)),S[0]>0&&(A=p+S[0])>a&&(a=A,Y.top=U),S[2]>0&&(C=q.t+S[2])<o&&(o=C,Y.bottom=U))),U!=L)&&(U=Cn(U))&&Nn(U););return(V={t:tn(a,0),l:tn(r,0),r:tn(i,0),b:tn(o,0)}).w=tn(V.r-V.l,0),V.h=tn(V.b-V.t,0),g=F.l,f=F.r,p=F.t,u=f-g,l=(m=F.b)-p,D=V.l,R=V.r,A=V.t,R-D,(C=V.b)-A,x=(x=(x=nn(m,C)-tn(p,A))<0?0:x)>l?l:x,T=(T=(T=nn(f,R)-tn(g,D))<0?0:T)>u?u:T,G.t=A<p?C<=p?0:tn(p-A,0):0,G.b=C>m?m<=A?0:tn(C-m,0):0,G.l=D<g?R<=g||C<=p||m<=A?0:tn(g-D,0):0,G.r=R>f?f<=D||C<=p?0:tn(R-f,0):0,G.w=tn(G.r-G.l,0),G.h=tn(G.b-G.t,0),G.xiv=u>0?Pn((T/u)[$t](2)):0,G.yiv=l>0?Pn((x/l)[$t](2)):0,G.iv=u>0||l>0?Pn((T*x/(u*l))[$t](2)):0,G.civ=0,n&&G.iv>.49&&(M=(N=function(e){var t,n,a,r,i,o,s,d,c,u,l,p,g,f,m,v,h=yn(e),y=Dn(e),b=Rn(y),w=h.t,I=h.l,E=[],_=0;if(E.on=0,t=h.w,n=h.h,i=a=an(t/10),o=r=an(n/10),t<=1||n<=1||a<1||r<1)return E;if(m=(v=Bn()).y,f=v.x,p=I+t,g=w+n,y&&b&&y.elementFromPoint){for(;i<t;){for(o=r;o<n;)d=w+o,(s=I+i)<=p&&d<=g&&E.push({x:s,y:d,on:0}),o+=r;i+=a}for(;c=E[_++];)s=tn(c.x-f,0),s=nn(s,c.x),d=tn(c.y-m,0),d=nn(d,c.y),0!=s?0!=d?(l=y.elementFromPoint(s,d))&&l!==b&&l!==e&&!On(l,e)&&((u=qn(l,"id"))||qn(l,"id",u=En(["geom_inter"||"","_",(new Date).getTime(),"_",en.round(100*en.random()),"_",fn++])),c.on=u,E.on++):(c.on="!y-offscreen",E.on++):(c.on="!x-offscreen",E.on++)}return E}(e))[Kt],(P=Pn(N.on,0))&&(O=1-Pn((P/M)[$t](2),0),G.civ=G.iv=O)),t.rect=F,t.clipRect=V,t.docRect=z,H[Kt]?(t.isRoot=!1,t.canScroll=!0,G.xs=!!s,G.ys=!!d):j.b>=V.b||j.r>=V.r?(t.isRoot=!0,G.xs=!!(z.w>j.w&&s),G.ys=!!(z.h>j.h&&d),t.canScroll=z.w>j.w||z.h>j.h):G.ys=G.xs=t.isRoot=t.canScroll=!1,t.scrollNodes=H,t.clipNodes=Y,t.expRect=G,G}function Ln(e,t,n){var a,r,i,o,s,d,c,u,l,p,g,f,m={},v={};if(Un(t,v,!0),!n&&!v.isRoot&&v.canScroll&&((r=v.expRect).xs||r.ys)){jn(e),a=[],mn[e]=a;for(var h=0;h<v.scrollNodes.length;h++){var y=v.scrollNodes[h],b={};b.node=y,b.onscroll=function(t){Fn(t,e,y)},ne(y,Wt,b.onscroll),a.push(b)}}return m.win=(s=o&&Tn(o)||rn,d=s.innerHeight||0,c=s.innerWidth||0,u=s.screenY||s.screenTop||0,l=d+u,p=s.screenX||s.screenLeft||0,g=c+p,f=Rn(o),d||c||!f||(d=f.clientHeight||0,g=p+(c=f.clientWidth||0),l=u+d),{t:u,l:p,b:l,r:g,w:c,h:d}),m.par=v.clipRect,r=v.expRect,(i=v.rect).iv=r.iv,i.xiv=r.xiv,i.yiv=r.yiv,delete r.iv,delete r.xiv,delete r.yiv,m.exp=r,m.self=i,m}function Fn(e,t,n){var a=mn[t];if(a)for(var r=0;r<a.length;r++){var i=a[r];if(i.node===n){i.tID&&(clearTimeout(i.tID),delete i.tID),i.tID=setTimeout((function(){var e=Lt.getInstance().getIframe(t);e&&ka(e.iframe,t,Ln(t,e.iframe,!0))}),ha);break}}}function jn(e){var t,n=mn[e];if(n)for(;t=n.pop();)t.tID&&clearTimeout(t.tID),ae(t.node,Wt,t.onscroll),t.node=t.onscroll=null,mn[e]=null;delete mn[e]}var Wn=Me();function zn(e){L({strategy:"WithAttributes",data:{id:"itunes-launch-store",src:e.detail.url}})}var Vn=[],Gn={},Hn={},Jn=[],Yn={},Xn=Fe((function(){ne(Wn,"focus",wa),ne(Wn,"blur",Ia),ne(Wn,"resize",Sa),ne(Wn,"scroll",Sa),ne(Wn,"pagehide",(function(){try{ae(Wn,"focus",wa),ae(Wn,"blur",Ia),ae(Wn,"resize",Sa),ae(Wn,"scroll",Sa),Ta()}catch(e){}}))})),$n=Me(),Kn=!1,Qn=!1,Zn={},ea=void 0,ta={},na=function(){return Zn},aa=function(e){Zn=e},ra=function(){return ta},ia=function(e){ta=e},oa=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e?(Qn=t,ea=Se(e,"http")||Se(e,"https")?e:"https://"+e,fe("Setting endpoint to: "+ea)):ve("Cannot set an empty endpoint")},sa=function(e){Kn=e},da=function(){return Kn};var ca=void 0,ua=void 0,la=!0,pa=function(e,t){var n=t,a=void 0,r=void 0;function i(e){var t=la?"tcString":"consentData";la&&e&&e.gdprApplies&&(e.purpose&&e.purpose.consents&&!e.purpose.consents[1]?sa(!0):e.purpose&&e.purpose.consents&&!0===e.purpose.consents[1]&&sa(!1));var n={consent_string:e?e[t]:void 0,consent_required:e?e.gdprApplies:void 0};if(e&&e.addtlConsent&&"string"==typeof e.addtlConsent&&-1!==e.addtlConsent.indexOf("~")){var a=e.addtlConsent.substring(e.addtlConsent.indexOf("~")+1);n.addtl_consent=Ce(a.split("."),(function(e){return parseInt(e,10)}))}ua.gdpr_consent=n}function o(e){clearTimeout(a),i(ca),Fe(s(e))}function s(e){e&&me(e+" Resuming request without consent information."),n()}if((ua=e).consentManagement&&(ua.consentManagement.disabled||ua.consentManagement.tcf&&ua.consentManagement.tcf.disabled))return ye("TCF Consent module was disabled."),Fe(s());var d=1e4;if(ua.consentManagement&&ce(ua.consentManagement.timeout)&&(d=ua.consentManagement.timeout),ca)return i(ca),Fe(s());a=setTimeout((function(){o(ca?"":"CMP workflow exceeded timeout threshold.")}),d),function(e,t){var n,a,i={};try{(r=window.__tcfapi||window.top.__tcfapi)||(r=window.__cmp||window.top.__cmp)&&(la=!1)}catch(e){}if(oe(r))r(la?"addEventListener":"getConsentData",null,e);else if(window.$sf&&window.$sf.ext&&"function"==typeof window.$sf.ext.cmp)la=!1,n=Object.keys(ua.tags),a=Ct(ua.tags[n[0]].sizes),window.$sf.ext.register(a[0].width,a[0].height,(function(t,n){"cmpReturn"===t&&e(n.vendorConsentData)})),window.$sf.ext.cmp("getConsentData");else{for(var o=window,s=void 0;!s;){try{(o.frames.__tcfapiLocator||o.frames.__cmpLocator)&&(s=o),o.frames.__cmpLocator&&(la=!1)}catch(e){}if(o===window.top)break;o=o.parent}if(!s)return t("TCF CMP not found.");!function(t){var n=la?"__tcfapi":"__cmp";window[n]=function(e,a,r){var o,s,d,c=""+Math.random(),u=(d={command:e,parameter:a,callId:c},(s=n+"Call")in(o={})?Object.defineProperty(o,s,{value:d,enumerable:!0,configurable:!0,writable:!0}):o[s]=d,o);i[c]=r,t.postMessage(u,"*")},ne(window,"message",a,!1),la?window.__tcfapi("addEventListener",null,r):window.__cmp("getConsentData",null,r);function a(e){var t=la?"__tcfapiReturn":"__cmpReturn",n="string"==typeof e.data&&e.data.includes(t)?JSON.parse(e.data):e.data;if(n[t]){var a=n[t];i[a.callId](a.returnValue,a.success),la||delete i[a.callId]}}function r(t,n){la||ae(window,"message",a,!1),e(t,n)}}(s)}}((function(e,t){la?!t||"object"!=typeof e||null===e||!0===e.gdprApplies&&"string"!=typeof e.tcString?o("TCF CMP returned unexpected consentObject during lookup process; returned value was ("+e+")"):"useractioncomplete"===e.eventStatus||"tcloaded"===e.eventStatus?(clearTimeout(a),i(ca=e),Fe(s())):"cmpuishown"===e.eventStatus&&(ca=e,e.tcString&&e.purposeOneTreatment&&(clearTimeout(a),i(ca),Fe(s()))):"object"!=typeof e||null===e||"string"!=typeof e.consentData||""===e.consentData?o("CMP returned unexpected consentObject during lookup process; returned value was ("+e+")"):(clearTimeout(a),i(ca=e),Fe(s()))}),o)},ga=M.r.NUM,fa=0,ma=0,va=0,ha=500,ya=function(e){fe("Expand iframe started by host");var t=!1,n=!1,a=0,r=0,i=0,o=0,s=void 0,d=void 0,c=Me().document.getElementById(M.n.UT_DIV+e.targetId),u=Lt.getInstance().getIframe(e.targetId),l=u.iframe.style;c||(c=u.iframe.parentNode);var p=c.style;p.display="";var g=parseInt(p.width,10),f=parseInt(p.height,10);if(isNaN(g)&&(g=0),isNaN(f)&&(f=0),e.bounds.multiDir?(i=g+(d=Re("data.bounds.left",e.bounds.left,ga))+Re("data.bounds.right",e.bounds.right,ga),o=f+(s=Re("data.bounds.top",e.bounds.top,ga))+Re("data.bounds.bottom",e.bounds.bottom,ga),s?(r=-1*s,n=!0):r=0,d?(a=-1*d,t=!0):a=0):(i=(t=(a=e.bounds.x)<0)?g+-1*a:g+a,o=(n=(r=e.bounds.y)<0)?f+-1*r:f+r),!(i<=g&&o<=f)){l.width=i+"px",l.height=o+"px",t&&(l.left=a+"px"),n&&(l.top=r+"px"),l.zIndex=M.p.DEFAULT_ZINDEX,l.position="relative",p.position="relative",e.bounds.push?(p.width=i+"px",p.height=o+"px"):(p.width=g+"px",p.height=f+"px");var m=function(){!function(e,t,n){var a=n.iframe.contentWindow,r={};r.targetId=t.targetId,r.status=e,r.geom=ba(t.targetId,n.iframe),Aa(a,JSON.stringify(r),Ue())}(M.p.STATUS.NOTIFY_EXPANDED,e,u)};e.ext&&"number"==typeof e.ext.tweenTime?function(e,t,n,a){var r=t.style;r.transition="height "+e.ext.tweenTime+"ms ease",r.height=n,r["overflow-y"]="hidden",ne(t,"transitionend",(function(){"function"==typeof a&&a()}))}(e,u.iframe,o,m):m()}};var ba=function(e,t){var n=Ln(e,t);return n.anx=function(){try{if(void 0!==window.top.location.href){var e=window,t=0,n=0;do{t+=e.pageYOffset||e.document.documentElement.scrollTop||e.document.body.scrollTop,n+=e.pageXOffset||e.document.documentElement.scrollLeft||e.document.body.scrollLeft,e=e.parent}while(e.parent!==window.top);return{scrollTop:t,scrollLeft:n}}}catch(e){}return{scrollTop:0,scrollLeft:0}}(),n},wa=function(){Ea(!0)},Ia=function(){Ea(!1)};function Ea(e){_a(),ma=window.setTimeout((function(){var t,n;t=e,n=Lt.getInstance().getIframes(),Ee(n,(function(e,n){var a=apntag.requests.tags[n];if(a.alwaysUseXDomainIframe||a.enableSafeFrame){var r=e.iframe.contentWindow,i={};i.targetId=n,i.value=t,i.status=M.p.STATUS.FOCUS_CHANGE,Aa(r,JSON.stringify(i),Ue())}})),_a()}),2)}function _a(){ma&&(clearTimeout(ma),ma=0)}var ka=function(e,t,n){var a=e.contentWindow,r={};r.targetId=t,r.geom=n,r.status=M.p.STATUS.GEOM_UPDATE,Aa(a,JSON.stringify(r),Ue())};var Sa=function(){fa||(fa=window.setTimeout(xa,ha))},Ta=function(){var e=Lt.getInstance().getIframes();Ee(e,(function(e,t){var n=apntag.requests.tags[t];(n.alwaysUseXDomainIframe||n.enableSafeFrame)&&(clearInterval(va),va=0,jn(t))}))};function xa(){var e=Lt.getInstance().getIframes();Ee(e,(function(e,t){var n=apntag.requests.tags[t];(n.alwaysUseXDomainIframe||n.enableSafeFrame)&&function(e,t){ka(e,t,ba(t,e))}(e.iframe,t)})),fa&&(clearTimeout(fa),fa=0)}var Aa=function(e,t,n){"string"!=typeof t&&(t=JSON.stringify(t)),e?e.postMessage(t,n):fe("Safeframe not yet rendered")},Ca=function(){var e={},t=[],n="";return{invokeNotify:function(n,a,r){t.push(s(n,a,r)),Ee(e,(function(e){e.addNotifyMessage(s(n,a,r)),"loading"!==e.status&&o(e)}))},loadRenderer:function(t,n){var a=n.renderer_id;if(t.enableSafeFrame&&(!window.$sf||!window.$sf.ext))return a=function(e,t){return t.renderer_id+"_"+e.targetId}(t,n),void(e[a]=c(n.renderer_url,a,t));var o=e[a];if(o){var s=e[a];"loaded"===o.status?(l(t),r(s,t,i),t.displayed=!0):o.addTag(t)}else be(window,n.renderer_url),e[a]=c(n.renderer_url,a,t)},setRendererStatus:function(t,n){var a=e[t];a&&(a.status=n,o(a))},registerRenderer:function(t,s,d){if(n=d,s=a(s),t&&e[t]&&ie(s)){var c=e[t];c.renderFn=s.renderAd,c.notifyFn=s.notify,c.status="loaded",window.currentTag&&window.currentTag.enableSafeFrame&&(u=window.currentTag,p=t,g="loaded",f={name:"updateRenderStatus",targetId:u.targetId,rId:p,status:g},Aa(window.parent,f,n)),o(c),Ee(c.getTags(),(function(e){e.displayed||(l(e),r(c.renderFn,e,(function(e,t){i(e,t,c)})),e.displayed=!0)}))}else ve("ast.js","registerRenderer must be called with (id, cbFn)");var u,p,g,f},clearState:function(){e={},t=[]}};function a(e){return oe(e)?{renderAd:e,notify:function(){}}:ie(e)&&oe(e.renderAd)?{renderAd:e.renderAd,notify:e.notify}:void 0}function r(e,t,n){oe(e)?e.call(apntag,t,n):ie(e)&&(oe(e.renderFn)?e.renderFn.call(apntag,t,n):ve("Error invoking rendererObj.renderAd(). renderAd must be a function"))}function i(e,t,a){a&&a.isSafeFrame?function(e,t){var a={name:"emitEvent",cmd:[e,t]};if(Aa(window.parent,a,n),apntag.mockSfListner&&apntag.mockSfListner.handler){apntag.mockSfListner.handler(apntag.mockSfListner.adObj);var r={name:"resizeAd",targetId:e,cmd:["auto","auto"]};Aa(window.parent,r,n)}}(e,t):apntag.emitEvent(e,t)}function o(e){oe(e.notifyFn)&&Ee(e.getNotifyMessages(),(function(t){t.sent||(t.sent=!0,e.notifyFn(t.messageType,t.messagePayload,t.targetId))}))}function s(e,t,n){return{messageType:e,messagePayload:t,targetId:n,sent:!1}}function d(e,t,n){var a=[],r=[];this.getTags=function(){return a},this.addTag=function(e){a.push(e)},this.addNotifyMessage=function(e){r.push(e)},this.getNotifyMessages=function(){return r},this.url=e,this.id=t,this.status="loading",this.renderFn=function(){},this.notifyFn=u,this.isSafeFrame=n.enableSafeFrame||!1,this.addTag(n)}function c(e,n,a){var r=new d(e,n,a);return function(e){Ee(t,(function(t){e.addNotifyMessage(t)}))}(r),r}function u(e,t,n){!function(e,t,n){var a=Lt.getInstance().getIframe(n).iframe.contentWindow;Aa(a,{messageType:e,messagePayload:t,status:"notify",targetId:n},Ue())}(e,t,n=n||this.getTags()[0].targetId)}function l(e){if(!e||!e.isMediated){var t=rt(e);Ie(window.document.body,t[Da],t[Ra])}}}(),Da=M.a.NOTIFY,Ra=M.a.CREATIVE_ID;var Ma=function(e){if(e){if(e.member&&(apntag.requests.member=Number(e.member)),e.targetingParams&&(apntag.requests.targetingParams=e.targetingParams,me("targetingParams will be deprecated soon. Please use keywords instead")),e.keywords&&(apntag.requests.keywords=e.keywords),e.user&&(apntag.requests.user=e.user),e.app&&(apntag.requests.app=e.app),e.device&&(apntag.requests.device=e.device),e.geoOverride){var t=function(e){var t=e.countryCode;if("string"==typeof t&&2===t.length){var n=e.zip;if(!("string"!=typeof n||n.length<1))return{countryCode:t.toUpperCase(),zip:n};me("Ignoring geoOveride options, Invalid zip code, it should be of type String and of atleast 1 character.")}else me("Ignoring geoOveride options, Invalid country code, it should be of type String and of 2 characters.")}(e.geoOverride);t&&(apntag.requests.geoOverride=t)}if(e.site&&(apntag.requests.site=e.site),e.content&&(apntag.requests.content=e.content),e.disablePsa&&(apntag.requests.disablePsa=!0),apntag.requests.enableSafeFrame=!1,e.enableSafeFrame&&(Xn(),apntag.requests.enableSafeFrame=!0),e.publisherId&&(apntag.requests.publisherId=e.publisherId),e.consentManagement&&(apntag.requests.consentManagement=e.consentManagement),e.auctionTimeout&&(apntag.requests.auctionTimeout=e.auctionTimeout),e.enableMediationEvents&&(apntag.requests.enableMediationEvents=!0),e.us_privacy&&(se(e.us_privacy)?apntag.requests.us_privacy=e.us_privacy:me("Ignoring us_privacy, it should be a string")),e.pageUrl&&(apntag.requests.pageUrlOverride=e.pageUrl),e.test&&(apntag.requests.test=!0),e.schain&&(apntag.requests.schainConfig=e.schain),e.msft&&(apntag.requests.msft=e.msft),e.trackingManagement){var n=e.trackingManagement;if(n.native&&n.native.loadViewabilityScriptAt){var a=se(n.native.loadViewabilityScriptAt)?n.native.loadViewabilityScriptAt.toLowerCase():null;!a||a!==M.c.NATIVE_VIEWABILITY.AD_RESPONSE&&a!==M.c.NATIVE_VIEWABILITY.IMPRESSION?me('Ignoring trackingManagement.native.loadViewabilityScriptAt, it should be either "impression" or "adResponse"'):(apntag.requests.trackingManagement=apntag.requests.trackingManagement||{},apntag.requests.trackingManagement.native={loadViewScriptAt:a})}if(n.userSync){var r={};ce(n.userSync.syncDelay)&&(r.syncDelay=n.userSync.syncDelay),"boolean"==typeof n.userSync.syncEnabled&&(r.syncEnabled=n.userSync.syncEnabled),ce(n.userSync.publisherId)&&(r.publisherId=n.userSync.publisherId),ce(n.userSync.sellerId)&&(r.sellerId=n.userSync.sellerId),apntag.requests.trackingManagement=apntag.requests.trackingManagement||{},apntag.requests.trackingManagement.userSync=r}}if(e.renderingManagement){var i=e.renderingManagement;apntag.requests.renderingManagement=apntag.requests.renderingManagement||{},"boolean"==typeof i.insertWrapperDiv&&(apntag.requests.renderingManagement.insertWrapperDiv=i.insertWrapperDiv),"boolean"==typeof i.sandboxAdIframe&&(apntag.requests.renderingManagement.sandboxAdIframe=i.sandboxAdIframe),Array.isArray(i.sandboxAttributes)&&(apntag.requests.renderingManagement.sandboxAttributes=i.sandboxAttributes)}}},Pa=void 0,Oa=function(e){if(!function(e){if(de(e)&&e.length>0)return!0;return ye("No size mapping defined"),!1}(e.sizeMapping))return e.sizes;var t,n,a,r=(n=t||Pa||Me(),a=n.document,n.innerWidth?n.innerWidth:a.body.clientWidth?a.body.clientWidth:a.documentElement.clientWidth?a.documentElement.clientWidth:0),i=void 0;if(!r){i=e.sizeMapping[0];for(var o=0;o<e.sizeMapping.length;o++)parseInt(e.sizeMapping[o].minWidth,10)>parseInt(i.minWidth,10)&&(i=e.sizeMapping[o]);return i.sizes?i.sizes:e.sizes}for(var s="",d=e.sizeMapping.slice().sort((function(e,t){return e.minWidth-t.minWidth})),c=0;c<d.length;c++)r>=d[c].minWidth&&(i=d[c]);return i&&i.sizes?(s=i.sizes,fe("tag : "+e.targetId+" resized based on device width to : "+s)):fe("tag : "+e.targetId+" not mapped to any sizes for device width. This request will be suppressed."),s};var Na=M.m.UNDEFINED,qa=M.c.NATIVE_VIEWABILITY.AD_RESPONSE;function Ba(e,t){var n=!1,a=e;if(2===arguments.length?(a=$n.apntag.requests.tags[t],(e.sizes&&a.sizeMapping||e.sizeMapping&&!a.sizeMapping)&&(n=!0)):(t=e.targetId,e.sizes&&e.sizeMapping&&(n=!0)),n)return ve("sizes and sizeMapping both cannot be defined for targetId: "+t),!1;if(e.sizeMapping){var r=Oa(e);if(""===r)return"";e.sizes=r}return!0}var Ua=function(e){if(e.rid&&(apntag.requests.keywords.rid=e.rid),e.provider_id&&(apntag.requests.keywords.provider_id=e.provider_id),e.debug&&(apntag.debug=e.debug),e.astToolkit&&e.astDongle&&(apntag.requests.toolkit={enabled:!0,dongle:e.astDongle}),e.size)ve("Size is deprecated, please use sizes instead.");else if(e.member?e.member=Number(e.member):e.member=apntag.requests.member,e.member||(e.member="none"),e.tagId||e.invCode&&e.member){if(e.sizeMapping)if(!Ba(e))return void ve("tag not mapped to any sizes for device width: "+e.targetId);try{var t=e.targetId,n=function(e,t){var n=e.member;apntag.requests=apntag.requests||{},apntag.requests.tags=apntag.requests.tags||{},apntag.requests.utCalled=apntag.requests.utCalled||!1,apntag.requests.hasLeft=apntag.requests.hasLeft||!1,apntag.requests.cbCalled=apntag.requests.cbCalled||!1,apntag.requests.enableSafeFrame&&(e.enableSafeFrame=!0),e.safeframe=Oe(Yn)||{},Ae(e,"safeframeConfig")&&(Ae(e.safeframeConfig,"allowExpansionByPush")&&(e.safeframe.expansionByPush=e.safeframeConfig.allowExpansionByPush),Ae(e.safeframeConfig,"allowExpansionByOverlay")&&(e.safeframe.expansionByOverlay=e.safeframeConfig.allowExpansionByOverlay),Ae(e.safeframeConfig,"sandbox")&&(e.safeframe.sandbox=e.safeframeConfig.sandbox),Ae(e.safeframeConfig,"meta")&&(e.safeframe.meta=e.safeframeConfig.meta)),apntag.requests.tags[t]=e,apntag.requests.tags[t].utCalled=apntag.requests.tags[t].utCalled||!1,apntag.requests.tags[t].showTagCalled=apntag.requests.tags[t].showTagCalled||!1,apntag.requests.tags[t].displayed=apntag.requests.tags[t].displayed||!1,apntag.requests.tags[t].initialHeight=1,apntag.requests.tags[t].initialWidth=1,apntag.requests.tags[t].on=apntag.onEvent||void 0,apntag.requests.tags[t].off=apntag.offEvent||void 0,apntag.requests.tags[t].setSizes=apntag.setSizes||void 0,apntag.requests.tags[t].modifyTag=apntag.modifyTag||void 0,apntag.requests.tags[t].trackingManagement=apntag.requests.trackingManagement||{native:{loadViewScriptAt:qa}},apntag.requests.tags[t].renderingManagement||(apntag.requests.tags[t].renderingManagement={});return["insertWrapperDiv","sandboxAdIframe","sandboxAttributes"].forEach((function(n){e.renderingManagement&&Ae(e.renderingManagement,n)?apntag.requests.tags[t].renderingManagement[n]=e.renderingManagement[n]:apntag.requests.renderingManagement&&Ae(apntag.requests.renderingManagement,n)&&(apntag.requests.tags[t].renderingManagement[n]=apntag.requests.renderingManagement[n])})),apntag.requests.tags[t].refresh=function(){return apntag.refresh(this.targetId)},apntag.requests.tags[t].setKeywords=function(e,t){return apntag.setKeywords(this.targetId,e,t)},Gn[n]=typeof Gn[n]===Na?[]:Gn[n],Gn[n].push(e.targetId),ra()[e.targetId]&&(apntag.requests.tags[t].showTagCalled=!0),apntag.requests.tags[t]}(e,t);return fe("defineTag called for: "+t),apntag.requests&&!0===apntag.requests.utCalled&&!apntag.requests.tags[t].utCalled&&fe("A placement was loaded after ut call was started. These ad calls will not be coordinated"),n}catch(e){ve("buildAdTagContainer: "+e.message)}}else ve("tagId or (invCode & memberId) should be defined for targetId: "+e.targetId)},La=function(e){ye("Invoking apntag.defineTag",arguments);var t=Ua(e);if(t){if(Jn.push(t),Hn[t.targetId])return Hn[t.targetId];var n={targetId:t.targetId,on:t.on,off:t.off,modifyTag:t.modifyTag,setKeywords:t.setKeywords};return Hn[t.targetId]=n,n}ve("No ad will be requested for targetId: "+e.targetId)},Fa=function(e){var t=Wa()+e.map((function(e){return'\n      <table style="border: 1px solid black; border-radius: 5px; font-family: sans-serif; margin: 1em; padding: .5em">\n        <tr>\n          <td style="padding-right: 5em;"><b>Target&nbsp;ID</b></td>\n          <td style="width: 100%;">'+za(e)+"</td>\n        </tr>\n        <tr>\n          <td><b>Creative ID</b></td>\n          <td>"+Ga(e,"creative_id")+"</td>\n        </tr>\n        <tr>\n          <td><b>Buyer Member ID</b></td>\n          <td>"+Ga(e,"buyer_member_id")+"</td></tr>\n        <tr>\n          <td><b>Creative Size</b></td>\n          <td>"+function(e){if(e.nobid)return Va;var t=null,n=null,a=e.ads&&e.ads.length?e.ads[0]:{};return a.rtb&&a.rtb.banner&&(t=a.rtb.banner.height,n=a.rtb.banner.width),t&&n?n+" x "+t:""}(e)+"</td>\n        </tr>\n        <tr>\n          <td><b>Available Sizes</b></td>\n          <td>"+function(e){try{var t=za(e),n=apntag.requests.tags[t].sizes;return JSON.stringify(n)}catch(e){return""}}(e)+"</td></tr>\n        <tr>\n          <td><b>Winning Bid</b></td>\n          <td>"+Ga(e,"cpm")+"</td></tr>\n        <tr>\n          <td><b>Demand Source</b></td>\n          <td>"+function(e){if(e.nobid)return Va;var t=function(e){var t=apntag.requests.tags;if(e.ads.length&&e.ads[0].seller_member_id)return e.ads[0].seller_member_id;for(var n in t)if(t.hasOwnProperty(n)&&t[n].uuid===e.uuid)return t[n].member;return null}(e);return e.ads[0].csm?"CSM":e.ads[0].buyer_member_id===t||e.ads[0].deal_id?e.ads[0].buyer_member_id!==t&&e.ads[0].deal_id?"Deal":e.ads[0].buyer_member_id===t?"Direct":"":"RTB"}(e)+"</td></tr>\n        <tr>\n          <td><b>Ad Type</b></td>\n          <td>"+Ga(e,"ad_type")+"</td></tr>\n        <tr>\n          <td><b>Media Type</b></td>\n          <td>"+Ga(e,"media_type_id")+'</td></tr>\n        <tr>\n          <td style="color: #555; font-size: smaller; padding-top: .5em;" colspan="2">\n            Console Ad Profile:\n            <a href="'+function(e){return"//console.appnexus.com/ad-quality?id="+e.placement.publisher.id}(e)+'" target="_blank">'+e.ad_profile_id+"</a>\n            "+function(e){return e.ads?'| <a href="//ib.adnxs.com/cr?id='+e.ads[0].creative_id+'" target="_blank">Creative Preview<a/>':""}(e)+"\n          </td>\n        </tr>\n      </table>\n    "})).join(" "),n=document.body,a=document.createElement("div");a.id="appnexus_debug_window";var r=document.createElement("div");r.style.width="100%",r.style.height="400px",r.style.clear="both",n.insertBefore(r,null);var i=a.style;i.position="fixed",i.bottom="0px",i.left="0px",i.width="100%",i.height="450px",i.overflow="hidden",i["border-top"]="1px solid",i["z-index"]=999999,i.background="white",n.insertBefore(a,null);var o=document.createElement("div");o.style.width="100%",o.style.height="30px";var s=ja();a.appendChild(s);var d=s.contentWindow.document;d.open(),d.write(t),d.close()};function ja(){var e=document.createElement("iframe");return e.id="appnexus-debug-console-loader",e.height="100%",e.width="100%",e.border="0px",e.hspace="0",e.vspace="0",e.marginWidth="0",e.marginHeight="0",e.style.border="0",e.frameBorder="0",e}function Wa(){return'<div style="margin-top:10px;margin-bottom:10px;"><span style="font-weight:bold">AST Dongle Value:</span> <input\n            id="ast-dongle-input"\n            type="text"\n            length="400"\n            style="border-radius:5px;"\n            placeholder="Enter ast_dongle value"\n            value=null\n         /></div>'}function za(e){try{return Object.keys(apntag.requests.tags).filter((function(t){return apntag.requests.tags[t].uuid===e.uuid}))[0]}catch(e){return""}}var Va='<span style="color: #ccc">nobid</span>';function Ga(e,t){if(e.nobid)return Va;var n=e.ads&&e.ads[0][t];return n||0===n?n:""}var Ha=function(){var e=navigator.userAgent.toLowerCase();return(/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[])[1]},Ja=M.b.BANNER,Ya=M.b.NATIVE,Xa=M.s.AD_TYPE,$a=M.b.VIDEO,Ka=M.s.BANNER,Qa=M.s.CONTENT,Za=M.a.CREATIVE_ID,er=M.i,tr=M.a.IMP_URLS,nr=M.a.NOAD,ar=M.m.OBJECT,rr=M.e.RTB,ir=M.a.TRACKERS,or=M.m.UNDEFINED,sr=function(e,t,n,a){var r=void 0,i=void 0,o=void 0,s=e.adResponse;!function(e){if(e.adResponse&&e.adResponse.ads){var t=Pe(e.adResponse.ads);if(t.banner){var n=e.initCollapsed,a=n&&n.expandBy&&Le(er).indexOf(n.expandBy)>=0;n&&!a&&me("TagID "+e.tagId+" initCollapsed is set but expandBy is not recognized, initial size will not be collapsed"),e.initialHeight=a?0:t.banner.height,e.initialWidth=a?0:t.banner.width}}}(e);var d,c=rt(e);if(typeof c===or||null===c||typeof c.error!==or)return d=s,void Ie(window.document.body,d[nr],d.uuid);if(s&&e.showTagCalled){if(function(e,t){if(t.renderer_url&&t.renderer_id){if(e.usesRenderer=!0,2===t.renderer_id&&e.enableSafeFrame&&(e.safeframe.expansionByPush=!0,e.customIframeProps={style:"overflow:hidden",allow:"autoplay"}),"native"===t.ad_type&&e.trackingManagement&&e.trackingManagement.native&&e.trackingManagement.native.loadViewScriptAt===M.c.NATIVE_VIEWABILITY.IMPRESSION&&(ye("Loading native viewability script during native render sequence"),Ve(t,e.targetId)),!e.enableSafeFrame)return function(e,t){var n=it(t);if(typeof n===or)return ve("No Content Source Found"),void(e.displayed=!1);t[t.ad_type]=n;(function(e){e.isMediated||e.isRtbVideoFallback||(e.adResponse.ad=e.adResponse.ads[0])})(e),Ca.loadRenderer(e,t)}(e,t),!0;Ca.loadRenderer(e,t)}}(e,c))return e.targetId;if(c[Xa]===Ya&&!e.usesRenderer)return fe("Render for the following ad should be handled outside of ast.js :"+e.targetId),e.displayed=!0,o=Pt(e.adResponse),Ye.emit(M.h.LOADED,e.targetId,o),he("The "+e.targetId+" ad is loaded."),e.targetId;if(c[Xa]===$a&&!e.usesRenderer)return me("Response has no renderer for video"),e.displayed=!1,e.targetId;if(c[Xa]===Ja||e.usesRenderer){if(c.content_source===rr&&!e.usesRenderer){var u=c[rr][Ka];if(le(u)||typeof u!==ar)return ve("Response has no banner object"),e.displayed=!1,e.targetId;if(!Ae(u,Qa))return ve("Response has no banner content"),e.displayed=!1,e.targetId;if(!Ae(u,"width"))return ve("Response has no banner width"),e.displayed=!1,e.targetId;if(!Ae(u,"height"))return ve("Response has no banner height"),e.displayed=!1,e.targetId}var l=void 0;Ae(n,e.targetId)&&(l=n[e.targetId]);var p=void 0;if(e.alwaysUseXDomainIframe||e.enableSafeFrame){a();var g=(p=e.wcElement?e.wcElement:window.document.getElementById(e.targetId)).style.height,f=p.style.width;p.style.height=e.initialHeight,p.style.width=e.initialWidth,p.style.height=g,p.style.width=f}var m=Oe(t);Ae(e.safeframe,"expansionByPush")&&(m.expansionByPush=e.safeframe.expansionByPush),Ae(e.safeframe,"expansionByOverlay")&&(m.expansionByOverlay=e.safeframe.expansionByOverlay),Ae(e.safeframe,"sandbox")&&(m.sandbox=e.safeframe.sandbox),Ae(e.safeframe,"meta")&&(m.meta=e.safeframe.meta),e.safeframe=m,i=function(e){var t=void 0,n=Be(e),a=e.curWindow||window,r=e.wcElement;try{t=r&&r.querySelector("#"+n)?r.querySelector("#"+n):a.document.getElementById(n)?a.document.getElementById(n):a.document.createElement("div")}catch(t){return ve("Error creating Ad Div: ",t),void(e.displayed=!1)}return t.style.display="none",t.id=n,t}(e),(e.alwaysUseXDomainIframe||e.enableSafeFrame)&&(i.style.height=e.initialHeight+"px",i.style.width=e.initialWidth+"px",i.style.display="block",p.appendChild(i),e.geom=function(e,t){fe("Geom starting");var n=ba(e,t);return 0===va&&(va=setInterval(Sa,1e3)),n}(e.targetId,i)),r=B(e,c);var v=Lt.getInstance(),h={},y=r;if(e.renderingManagement&&e.renderingManagement.insertWrapperDiv){var b=document.createElement("div");b.append(r),y=b,ye("renderingManagement.insertWrapperDiv was enabled, creating extra div element around iframe container")}if(h.iframe=r,h.originalWidth=e.initialWidth,h.originalHeight=e.initialHeight,v.add(e.targetId,h),n[e.targetId]=r,typeof l!==or&&window.document.getElementById(l.id)?i.replaceChild(y,l):i.appendChild(y),e.displayed=!0,window.document.body)try{!function(e,t,n){var a=Ha(),r=e.curWindow||window,i=e.wcElement?e.wcElement:r.document.getElementById(e.targetId);if(i){e.alwaysUseXDomainIframe||e.enableSafeFrame||(i.appendChild(t),t.style.display="inline"),e.utDivId=t.id,e.utiframeId=n.id,a===M.d.IE||a===M.d.OPERA?function(e,t){if(t.alwaysUseXDomainIframe||t.enableSafeFrame)e.src=q+M.j.SAFE_FRAME_URL;else{var n;n=j(t);try{e.contentWindow.contents=n}catch(t){e.src="javascript:document.write('<script>document.domain=\""+document.domain+"\"<\/script>')",e.contentWindow.contents=n}var a=document.getElementsByTagName("base"),r=void 0;a.length&&(r=a.target,a[0].target="_self"),e.src='javascript:window["contents"];',a.length&&(a[0].target=r)}}(n,e):U(n,e);var o=e.adResponse.ads?e.adResponse.ads[0]:e.adResponse.ad;if(void 0===o)return me("No ad found in response, nothing to display."),void(e.displayed=!1);(!e.isMediated&&!e.usesRenderer||e.adResponse.ad&&"rtb"===e.adResponse.ad.content_source)&&(!function(e,t){for(var n=e[rr][ir][0][tr],a=0;a<n.length;a++)Ie(t.parentElement,n[a],e[Za])}(o,n),fe("Win notification sent for ad tag: "+e.targetId));var s=it(o),d=Number(i.style.width.replace(/[^\d\.\-]/g,""));!isNaN(d)&&d>s.width&&("center"===e.promoAlignment?i.setAttribute("align","center"):i.setAttribute("align","left")),fe("The "+e.targetId+" ad is loaded."),he("The "+e.targetId+" ad is loaded.");var c=Pt(e.adResponse);e.usesRenderer||apntag.requests.enableMediationEvents&&e.isMediated||Ye.emit(M.h.LOADED,e.targetId,c)}else me("No div element found for display ad. This ad will not show. Div id: "+e.targetId),e.displayed=!1}(e,i,r)}catch(t){ve("Error rendering ad: ",t),e.displayed=!1}else ve("Error rendering ad: window.document.body is undefined"),e.displayed=!1}else ve("Error rendering ad: unknown type"),e.displayed=!1;return e.targetId}};var dr=M.b.NATIVE,cr=M.b.BANNER,ur=M.b.VIDEO,lr=M.m.UNDEFINED,pr=M.j.USERSYNC_URL;function gr(e,t,n){fe("renderAd is called"),Ee(apntag.requests.tags,(function(e){if(e.uuid===t){e.adResponse=n;try{if(n.ad&&n.ad.ad_type===cr){var a=n.ad.content_source;e.ad={mediatedContent:n.ad[a].banner.content},e.initialHeight=n.ad[a].banner.height,e.initialWidth=n.ad[a].banner.width}}catch(e){ve("Error while setting mediated content for banner in renderAd"+e)}var r=sr(e,Yn,na(),Xn);Vn.push(r)}}))}function fr(e,t,n,a){var r=void 0;if(e.uuid===t.uuid)if(!0===t.nobid)h.trackEvent({type:k,data:{batchId:a}},e.tagId),fe("No bid for targetId:"+e.targetId),r=Pt(t),Ye.emit(M.h.NO_BID,n,r);else if(e.adResponse=t,e.utCalled=!0,r=Pt(t),p.a.addPlacementData(e.tagId,{adType:r.adType,adHeight:r.height,adWidth:r.width}),h.trackEvent({type:_,data:{batchId:a}},e.tagId),Ye.emit(M.h.AVAILABLE,n,r),!e.prebid&&!e.displayed){var i=sr(e,Yn,na(),Xn);Vn.push(i)}}function mr(e,t,n){var a=null;if(apntag.requests.cbCalled=!0,typeof e===lr||null===e||e.error){var r=e&&e.error?M.q.ERROR_TYPES.AD_RESPONSE_ERROR:M.q.ERROR_TYPES.ENDPOINT_ERROR,i=e&&e.error?e.error:"Malformed response from ad server",o=new Error(i);w.trackCriticalError(r,o),ve("Error response from impbus: "+i);var s={};try{s=JSON.parse(t)}catch(e){}Ee(apntag.requests.tags,(function(e,t){var n=Ot(i,t,void 0,200);e&&(a=Pt(e.adResponse)),Ee(s.tags,(function(r){r.uuid===e.uuid&&Ye.emit(M.h.BAD_REQUEST,t,n,a)}))}))}else{e.debug&&e.debug.debug_info&&function(e){e=e.replace(/(\n)/g,"<br>"),e=Wa()+e;var t=document.body,n=document.createElement("div");n.id="appnexus_debug_window";var a=document.createElement("div");a.style.width="100%",a.style.height="400px",a.style.clear="both",t.insertBefore(a,null);var r=n.style;r.position="fixed",r.bottom="0px",r.left="0px",r.width="100%",r.height="450px",r.overflow="hidden",r["border-top"]="1px solid",r["z-index"]=999999,r.background="white",t.insertBefore(n,null);var i=document.createElement("div");i.style.width="100%",i.style.height="30px";var o=ja();n.appendChild(o);var s=o.contentWindow.document;o.onload=function(){for(var e=s.getElementsByTagName("br"),t=e.length,n=0,a=void 0;n<t-1;n++)"br"===((a=e[n].nextSibling)&&a.nodeName.toLowerCase())&&(a.style.display="none")};s.open(),s.write(e),s.write("<\/script>"),s.close()}(e.debug.debug_info),e.toolkit&&e.toolkit.enabled&&Fa(e.tags),Ee(e.tags,(function(e){if(e.error)Ee(apntag.requests.tags,(function(t){if(t.uuid===e.uuid){var n="There was an exception from targetId:"+t.targetId+" this usually means there is a setup error on the tag (invalid ID etc)";ve(n,e.error),w.trackCriticalError(M.q.ERROR_TYPES.AD_RESPONSE_ERROR,new Error(n));var a=Ot(n,t.targetId,void 0,200);Ye.emit(M.h.BAD_REQUEST,t.targetId,a)}}));else{if(e.ads&&e.ads.length&&e.ads[0].ad_type===dr)if(!function(e){var t={},n=void 0;Ee(Jn,(function(t){t.uuid===e.uuid&&(n=t)})),n&&(t=n.native);var a=[];Ee(t,(function(e,t){!0===e.required&&a.push(t)}));var r=Pt(e),i=[];Ee(r.native,(function(e,t){le(e)||i.push(t)}));var o=i.length>0;return Ee(a,(function(e){o=o&&i.indexOf(e)>-1})),o}(e)){var t="required native assets missing from response";return w.trackCriticalError(M.q.ERROR_TYPES.AD_RESPONSE_ERROR,new Error(t)),void ve(t)}var r=e.ads,i=function(e){var t=!1;return e&&Ee(e,(function(e){"csm"===e.content_source&&(t=!0)})),t}(r),o=e.rtb_video_fallback;Ee(apntag.requests.tags,i||o?function(t,o){if(t.uuid===e.uuid){t.utCalled=!0,i?t.isMediated=!0:t.isRtbVideoFallback=!0;var s=function(e){var t=tt;return Array.isArray(e)&&e.length>0&&e[0][et]===nt&&(t=nt),t}(r),d=function(e,t){var n={};return Ee(e,(function(e){e.uuid===t.uuid&&e.mediationOptions&&(n=e.mediationOptions)})),n}(apntag.requests.tags,e);if(s===ur)t.isVideoMediation=!0,a=Pt(e),Ye.emit(M.h.AVAILABLE,o,a),at(s,e,d,gr);else{t.isBannerMediation=!0;var c=(u=t.targetId,l=e,p="<script>",p+="var APN_macros = {};",p+='APN_macros.uuid = "'+u+'";',p+="APN_macros.enableMediationEvents = "+apntag.requests.enableMediationEvents+";",p+="APN_macros.expandByCreative = "+ke(u)+";",p+="APN_macros.ads = ",p+='window.parent.apntag.getAdMarkup("'+u+'", "'+l.uuid+'");',p+=";",p+="document.write('<scr' + 'ipt src=\""+Ze+"\"></scr' + 'ipt>');",p+="<\/script>");e.ad={ad_type:cr},t.ad={mediatedContent:c},fr(t,e,o,n)}}var u,l,p}:function(t,a){fr(t,e,a,n)})}})),apntag.requests.checkDisplay&&ze();var d=apntag.requests.trackingManagement&&apntag.requests.trackingManagement.userSync;if(d&&!1===d.syncEnabled)ye("AST userSync feature was disabled as per setPageOpts.");else if(!0===da())ye("AST userSync feature was disabled due to TCF consent choices.");else{var c=3e3;if(d&&d.syncDelay&&(c=d.syncDelay),c)return setTimeout(l,c);l()}}function u(){var e=apntag.requests.trackingManagement&&apntag.requests.trackingManagement.userSync,t=pr+"?";return e&&(t+="number"==typeof e.sellerId?"seller_id="+e.sellerId+"&":"",t+="number"==typeof e.publisherId?"pub_id="+e.publisherId+"&":""),t=t.substring(0,t.length-1)}function l(){ye("AST is loading the userSync URL."),L({strategy:"WithAttributes",data:{id:Ge()+Math.random().toString(16).substr(2),src:u(),sandbox:"allow-scripts allow-same-origin"}})}}var vr=void 0,hr=void 0,yr=function(e,t){var n=t,a=void 0;function r(e){var t={us_privacy:e?e.uspString:void 0};hr.us_privacy=t.us_privacy}function i(e){clearTimeout(a),r(),Fe(o(e))}function o(e){e&&me(e+" Resuming request without CCPA USP consent information."),n()}if((hr=e).consentManagement&&(hr.consentManagement.disabled||hr.consentManagement.usp&&hr.consentManagement.usp.disabled))return ye("USP Consent module was disabled."),Fe(o());var s=1e4;if(hr.consentManagement&&ce(hr.consentManagement.timeout)&&(s=hr.consentManagement.timeout),vr)return r(vr),Fe(o());a=setTimeout((function(){i("CCPA USP CMP workflow exceeded timeout threshold.")}),s),function(e,t){var n={},a=void 0;try{a=window.__uspapi||window.top.__uspapi}catch(e){}if(oe(a))a("getUSPData",1,e);else{for(var r=window,i=void 0;!i;){try{r.frames.__uspapiLocator&&(i=r)}catch(e){}if(r===window.top)break;r=r.parent}if(!i)return t("CCPA USP CMP not found.");!function(t){function a(e){var t="string"==typeof e.data&&e.data.includes("uspapiReturn")?JSON.parse(e.data):e.data;if(t.__uspapiReturn){var a=t.__uspapiReturn;n[a.callId](a.returnValue,a.success),delete n[a.callId]}}window.__uspapi=function(e,a,r){var i=""+Math.random(),o={__uspapiCall:{command:e,version:a,callId:i}};n[i]=r,t.postMessage(o,"*")},ne(window,"message",a,!1),window.__uspapi("getUSPData",1,(function(t){ae(window,"message",a,!1),e(t)}))}(i)}}((function(e){"object"!=typeof e||null===e||"string"!=typeof e.uspString||""===e.uspString?i("CCPA USP CMP returned unexpected consentObject during lookup process; returned value was ("+e+")"):(clearTimeout(a),r(vr=e),Fe(o()))}),i)};var br=void 0,wr={},Ir=void 0,Er=function(e,t){var n=t,a=void 0;function r(e){var t={gpp:e&&""!==e.gppString?e.gppString:void 0};e&&e.applicableSections?t.gpp_sid=e.applicableSections:e&&e.applicableSection?t.gpp_sid=e.applicableSection:t.gpp_sid=wr.applicableSections,t.gpp_sid&&-1===t.gpp_sid[0]&&(t.gpp_sid=void 0),Ir.gpp_consent=t}function i(e,t){clearTimeout(a),r(t),Fe(o(e))}function o(e){e&&me(e+" Resuming request without GPP consent information."),n()}var s=(Ir=e).consentManagement;if(s&&(s.disabled||s.gpp&&s.gpp.disabled))return ye("GPP Consnent module was disabled."),Fe(o());var d=1e4;s&&ce(s.timeout)&&(d=Ir.consentManagement.timeout),a=setTimeout((function(){i("GPP CMP workflow exceeded timeout threshold.",wr)}),d),function(e,t){function n(e){return e&&Array.isArray(e.applicableSections)&&e.applicableSections.length>0&&0!==e.applicableSections[0]}function a(e){return e&&Array.isArray(e.applicableSection)&&e.applicableSection.length>0&&0!==e.applicableSection[0]}var r={},i=!1,o=function(){for(var e=window,t=void 0,n=!1;;){try{if("function"==typeof e.__gpp){t=e,n=!0;break}}catch(e){}try{if(e.frames.__gppLocator){t=e;break}}catch(e){}if(e===window.top)break;e=e.parent}return{cmpFrame:t,cmpDirectAccess:n}}(),s=o.cmpFrame,d=o.cmpDirectAccess;if(!s)return t("GPP CMP not found.");if(d&&oe(s.__gpp)){ye("Detected GPP CMP API is directly accessible, calling it now...");var c=s.__gpp("ping",(function(e,n){!0===n&&e&&"1.1"===e.gppVersion?(ye("Detected GPP CMP is running version 1.1.  Proceeding with next steps..."),br="1.1",s.__gpp("addEventListener",u)):n||t('GPP CMP returned a failed "success" when calling the ping command. Check the state of CMP.')}));c&&"1.0"===c.gppVersion&&(ye("Detected GPP CMP is running version 1.0.  Proceeding with next steps..."),br="1.0",s.__gpp("addEventListener",u))}else ye("Detected GPP CMP is outside the current iframe where AST is located, calling it now..."),l("ping",s,(function(e){!e||"1.0"!==e.gppVersion&&"1.1"!==e.gppVersion||(ye("Detected GPP CMP is running version"+e.gppVersion+".  Proceeding with next steps..."),br=e.gppVersion,l("addEventListener",s,p))}));function u(r){if(r)if(ye("Received a response from GPP CMP for eventlistener",r),r.pingData&&"error"===r.pingData.cmpStatus)t("CMP returned with a cmpStatus:error response.  Please check CMP setup.");else if("1.0"===br){if("sectionChange"===r.eventName||"loaded"===r.pingData.cmpStatus&&"visible"!==r.pingData.cmpDisplayStatus){var i=s.__gpp("getGPPData");ye("Received a response from GPP CMP for getGPPData",i),e(i)}else if(!wr.applicableSections){var o=s.__gpp("getGPPData");ye("Called GPP CMP early to determine the value of applicableSections, value returned from CMP: ",o),n(o)?wr.applicableSections=o.applicableSections:a(o)&&(wr.applicableSections=o.applicableSection)}}else"1.1"===br&&("sectionChange"===r.eventName||"signalStatus"===r.eventName&&"ready"===r.data||r.pingData&&"loaded"===r.pingData.cmpStatus&&"visible"!==r.pingData.cmpDisplayStatus?(ye("Received a desired event response from GPP CMP, pingData was: ",r.pingData),e(r.pingData)):wr.applicableSections||(ye("Called GPP CMP early to determine the value of applicableSections, value returned from CMP: ",r.pingData),n(r.pingData)&&(wr.applicableSections=r.pingData.applicableSections)))}function l(e,t,n,a){i||(window.addEventListener("message",(function(e){var t="string"==typeof e.data&&e.data.includes("__gppReturn")?JSON.parse(e.data):e.data;if(t.__gppReturn&&t.__gppReturn.callId){var n=t.__gppReturn;r.hasOwnProperty(n.callId)&&r[n.callId](n.returnValue)}}),!1),i=!0),ye("Making a postMessage call to the CMP for command: ",e);var o,s,d,c=Math.random().toString(),u=(d={command:e,parameter:a,version:"1.0"===br?1:br,callId:c},(s="__gppCall")in(o={})?Object.defineProperty(o,s,{value:d,enumerable:!0,configurable:!0,writable:!0}):o[s]=d,o);r[c]=n,t.postMessage(u,"*")}function p(a){a&&(ye("Received a response from GPP CMP for eventlistener",a),"error"===a.pingData.cmpStatus?t("CMP returned with a cmpStatus:error response.  Please check CMP setup."):"1.0"===br?"sectionChange"===a.eventName||"loaded"===a.pingData.cmpStatus&&"visible"!==a.pingData.cmpDisplayStatus?l("getGPPData",s,f):wr.applicableSections||l("getGPPData",s,g):"1.1"===br&&("sectionChange"===a.eventName||"signalStatus"===a.eventName&&"ready"===a.data||a.pingData&&"loaded"===a.pingData.cmpStatus&&"visible"!==a.pingData.cmpDisplayStatus?(ye("Received a desired event response from GPP CMP, pingData was: ",a.pingData),e(a.pingData)):wr.applicableSections||(ye("Called GPP CMP early to determine the value of applicableSections, value returned from CMP: ",a.pingData),n(a.pingData)&&(wr.applicableSections=a.pingData.applicableSections))))}function g(e){ye("Called GPP CMP early to determine the value of applicableSections, value returned from CMP: ",e),n(e)?wr.applicableSections=e.applicableSections:a(e)&&(wr.applicableSections=e.applicableSection)}function f(t){ye("Received a response from GPP CMP for getGPPData",t),e(t)}}((function(e){e&&"object"==typeof e&&null!==e&&"string"==typeof e.gppString&&(Array.isArray(e.applicableSections)||Array.isArray(e.applicableSection))?(clearTimeout(a),r(e),Fe(o())):i("GPP CMP returned unexpected consentObject during lookup process; returned value was ("+e+")")}),i)};function _r(e,t,n,a,r){Ee(Gn[t],(function(t){!function(e,t,n,a,r){0===n&&(e="Failure to contact endpoint. This can be caused by invalid CORS headers or failure of server to respond.");var i=apntag.requests.tags[t],o=void 0;i&&(o=Pt(i.adResponse));var s=Ot(e,t,r,n);Ye.emit(a,t,s,o)}(e,t,n,a,r)}))}var kr=function(e,t){var n=$n,a=function(e){return e.url+(e.url.indexOf("?")+1?"&":"?")+"cb=apntag.handleCb&q="+encodeURI(e.data)}(e),r=be(n,a);apntag.requests.utCalled=!0,r.onload=function(){fe("JSONP fallback used instead of POST.")},r.onerror=function(n){if(!apntag.requests.errorReported){var a="Unknown script error contacting endpoint over JSONP. Endpoint: "+e.url;_r(a,t,"-1",M.h.REQUEST_FAIL,n),ve(a)}},r.onreadystatechange=function(n){if(!("loaded"!==r.readyState&&"complete"!==r.readyState||apntag.requests.cbCalled||apntag.requests.errorReported)){apntag.requests.errorReported=!0;var a="Unknown network error contacting endpoint over JSONP. Endpoint: "+e.url;_r(a,t,"-1",M.h.REQUEST_FAIL,n),ve(a)}}},Sr=function(e){var t={},n=function(){Qn||(ea==="https://"+M.g.IMPBUS&&da()&&(ea="https://"+M.g.IMPBUS_SIMPLE),ea!=="https://"+M.g.IMPBUS_SIMPLE||da()||(ea="https://"+M.g.IMPBUS));var e=!1;return Ee(apntag.requests.tags,(function(t){t.prebid&&(e=!0)})),e?ea+M.g.UT_PREBID:ea+M.g.UT_BASE}();return t.url=n,t.data=JSON.stringify(e),t},Tr=function(e,t){!function(e,t){Ee(apntag.requests.tags,(function(e){e.utCalled||-1===t.indexOf(e.targetId)||Ye.emit(M.h.REQUEST,e.targetId)})),he("Ad is requested for member "+e)}(e,t);var n=Dt(apntag.requests,e,Jn,t);n=function(e){if(Me().context&&"AMP-AD"===Me().context.tagName){e.is_amp=!0,e.referrer_detection&&(e.referrer_detection.rd_can=Me().context.canonicalUrl);var t=Me().context.consentSharedData;if(t){var n={consent_string:t.consentString,consent_required:t.consentRequired};e.gdpr_consent=n}}return e}(n);var a=Sr(n);le(n.tags)?me("ast.loadTagsByMemberId: no defined tags at this point so no /UT request will be made"):"withCredentials"in new XMLHttpRequest?function(e,t){var n,a=e.data,r=new XMLHttpRequest,i=(n=JSON.parse(e.data)).tags?n.tags.map((function(e){return e.id})):[],o=Math.floor(1e8*Math.random());i.forEach((function(e){p.a.addPlacementData(e,{placementId:e}),h.trackEvent({type:E,data:{batchId:o}},e)})),r.onload=function(){var e=null;if(200===this.status)try{e=JSON.parse(this.responseText),apntag.handleCb(e,a,o)}catch(e){ve("failed to parse ad response from impbus: "+e.message),_r(e.message,t,this.status,M.h.REQUEST_FAIL,e)}else ve(this.status+" : "+this.statusText),_r(this.statusText,t,this.status,M.h.REQUEST_FAIL)},r.onerror=function(n){var a=n.target.status;_r("Error contacting impbus endpoint: "+e.url+" http response code:"+a,t,a,M.h.REQUEST_FAIL)},r.open("POST",e.url,!0),r.setRequestHeader("Content-Type","text/plain"),apntag.requests.test&&r.setRequestHeader("X-Is-Test",1),r.withCredentials=!0;try{r.send(a),apntag.requests.utCalled=!0}catch(n){ve("Error making POST request: "+n),kr(e,t)}}(a,e):kr(a,e)},xr=function(e){Ee(Gn,(function(t,n){if("none"===n)Tr(n,e);else{var a=Number(n);isNaN(a)?ve("Invalid value for member"):Tr(a,e)}}))},Ar=function(e){e=e||Ce(apntag.requests.tags,(function(e){return e.targetId})),de(e)||(e=[e]);var t=!1,n=!1,a=!1;pa(apntag.requests,(function(){t=!0,n&&a&&xr(e)})),yr(apntag.requests,(function(){n=!0,t&&a&&xr(e)})),Er(apntag.requests,(function(){a=!0,t&&n&&xr(e)}))};function Cr(e,t,n){if(fe("showTag called for "+e),ra()[e]=!0,We(e)){var a=apntag.requests.tags[e];if(a.showTagCalled=!0,a.curWindow=t,a.wcElement=n,a.displayed)return void me("Attempting to display ad that is already displayed, will not render this ad again: "+e);if(apntag.requests.utCalled)if(a.adResponse){var r=sr(a,Yn,na(),Xn);Vn.push(r),apntag.requests.hasLeft&&ze()}else apntag.requests.checkDisplay=!0;else me(e+" : showTag() called before ad request was made. This placement might not display if a subsequent loadTags() call is not made")}else fe("the "+e+" tag was loaded before the ad placement was available.",M.k.WARN)}function Dr(e){if(fe("getTag called for tag "+e),We(e))return e&&Hn[e]?Hn[e]:void 0;ve("the "+e+" tag is not defined.",M.k.WARN)}var Rr,Mr,Pr,Or=function(e){apntag.requests.utCalled=!1,apntag.requests.hasLeft=!1,apntag.requests.cbCalled=!1,apntag.requests.errorReported=!1;var t=function(e){var t={};return 0===e.length?apntag.requests.tags:(Ee(apntag.requests.tags,(function(n,a){for(var r=0;r<e.length;r++)e[r]===a&&(t[a]=n)})),t)}(function(e){var t=[];return de(e)?t=e:se(e)&&t.push(e),t}(e));Ee(t,(function(e,n){Ee(Vn,(function(e){if(n===e){var a=$n.document,r=t[n].wcElement||a.getElementById(e);if(!r)return;for(;r.hasChildNodes();)r.removeChild(r.firstChild)}}))})),Ee(t,(function(e){e.utCalled=!1,e.displayed=!1,e.isMediated=!1,e.isBannerMediation=!1,e.isVideoMediation=!1,e.ad={}}));try{Ar()}catch(e){ve("refreshTags "+e.message)}};function Nr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=0,r=0;de(t)&&2===t.length?(r=t[0],a=t[1]):ve("resizeAd must be invoked with a (targetId,[width, height])");var i=na()[e];if(i){var o=n.resizeAdParentDiv,s=apntag.requests.tags[e].wcElement,d=Dr(e),c=Be(d),u=s?s.querySelector("#"+c):$n.document.getElementById(c),l=apntag.requests.tags[e];if(u){var p=!1;if("boolean"==typeof o?p=o:l&&"boolean"==typeof l.resizeAdParentDiv&&(p=l.resizeAdParentDiv),p&&(u.style.height=a+"px",u.style.width=r+"px",u.style.height=a,u.style.width=r),u.style.height=a,u.style.width=r,i.height=a+"px",i.width=r+"px",i.height=a,i.width=r,l&&!l.enableSafeFrame&&("none"!==u.style.display&&0===a&&0===r?(l.styleDisplay=u.style.display,u.style.display="none"):"none"===u.style.display&&0!==a&&0!==r&&(u.style.display=l.styleDisplay||"inline")),fe("ResizeAd successful for targetId: "+e),l&&l.isMediated&&i.contentWindow){var g=Me(),f=g.location.protocol+"//"+g.location.host,m={name:"resizeAd",size:[r,a]};i.contentWindow.postMessage(JSON.stringify(m),f)}}else ve("Failed to find target for resizeAd: "+e)}else ve("Failed to find target for resizeAd : "+e)}p.a.addSessionData({sdkType:"ast",sdkVersion:"0.60.1"}),Rr=.001,p.a.setSampleRate(Rr),Pr=w,window.addEventListener("error",e=>{Object(f.d)(e.filename)&&Pr.trackCriticalError("unhandled",e)}),Object(f.c)().includes("give_me_error_please")&&setTimeout(()=>{throw new Error("I'm error from the prod")},1e3),R.init(),h.trackEvent({type:I,data:Mr});var qr=M.b.NATIVE,Br=M.b.VIDEO,Ur=M.m.UNDEFINED,Lr=M.m.NUMBER,Fr=M.a.NOAD;ne($n,"message",(function(e){if(e.origin===Ue()&&"string"==typeof e.data){ye("Data sent from creative",e.data);var t=void 0;try{t=JSON.parse(e.data)}catch(t){return void("nobid"===e.data?fe("No bid response returned"):ve("Invalid data from creative: "+e.data))}if(Ae(t,"eventType"))"adError"===t.eventType&&window.apntag.recordErrorEvent(t.exception,t.targetId);else switch(t.name){case"expand":ya(t);break;case"collapse":!function(e){fe("Collapse iframe started by host");var t=Me(),n=Lt.getInstance().getIframe(e.targetId),a=n.iframe.style,r=t.document.getElementById(M.n.UT_DIV+e.targetId);r||(r=n.iframe.parentNode);var i=r.style,o=n.originalWidth,s=n.originalHeight;e.ext&&(0===e.ext.width&&(o=0),0===e.ext.height&&(s=0)),a.left="",a.top="0px",i.width=o+"px",a.width=o+"px",i.height=s+"px",a.height=s+"px",a.zIndex="";var d=n.iframe.contentWindow,c={};c.targetId=e.targetId,c.geom=ba(e.targetId,n.iframe),c.status=M.p.STATUS.NOTIFY_COLLAPSED,Aa(d,JSON.stringify(c),Ue())}(t);break;case"cmp":!function(e){function t(){var t=apntag.requests.gdpr_consent,n=Lt.getInstance().getIframe(e.targetId).iframe.contentWindow,a={targetId:e.targetId,gdpr_consent:t,status:M.p.STATUS.CMP};Aa(n,a,Ue())}apntag.requests.gdpr_consent?t():pa(apntag.requests,t)}(t);break;case"resizeAd":apntag.resizeAd(t.targetId,t.cmd);break;case"mediatedNative":apntag.handleMediationBid(t.targetId);break;case"emitEvent":apntag.emitEvent.apply(null,t.cmd);break;case"message":break;case"updateRenderStatus":Ca.setRendererStatus(t.rId+"_"+t.targetId,t.status);break;case"setParentDivStyleDefaultProp":var n=apntag.requests.tags[""+t.targetId].wcElement,a=n?n.querySelector("#"+M.n.UT_DIV+t.targetId):document.getElementById(M.n.UT_DIV+t.targetId);Ee(t.cmd,(function(e,t){""===a.style[t]&&(a.style[t]=e)}))}}})),Yn.expansionByPush=!1,Yn.expansionByOverlay=!0,Yn.readCookie=!1,Yn.writeCookie=!1,Yn.sandbox=!1,function(){if(/(iPhone)/i.test(navigator.userAgent))try{ne(Wn.document,"apntag_iTunesLaunch",zn)}catch(e){}}();try{console.info?console.info("AST library loaded: 0.60.1"):console.log("AST library loaded: 0.60.1")}catch(e){}$n.apntag=typeof $n.apntag!==Ur?$n.apntag:{};var jr=$n.apntag;function Wr(e,t,n){var a,r=zr(e),i=function(e,t,n){var a=e.adResponse&&e.adResponse.ads&&e.adResponse.ads.length,r=a&&e.adResponse.ads[a-1].ad_type===M.b.NATIVE;return e.isMediated&&r&&!n?Pt(e.adResponse,e.adResponse.ads[a-1]):Pt(e.adResponse,n)}(r,0,n);fe("handling event for DOM ID:  "+i.targetId+" eventType : "+t),(t=t===M.o.LOADED?"adLoaded":t)===M.h.LOADED||t===M.h.LOADED_MEDIATED||t===M.h.NO_BID_MEDIATED?Ye.emit(t,i.targetId,i):Ye.emit(t,i.targetId),t===M.h.NO_BID&&r.isMediated&&(a=r.adResponse,Ie(window.document.body,a[Fr],a.uuid))}function zr(e){var t={};return Ee(jr.requests.tags,(function(n){e!==n.uuid&&e!==n.targetId||(t=n)})),t}jr.anq=jr.anq||[],jr.debug=jr.debug||!1,jr.dongle=jr.dongle||void 0,jr.loaded=!0,jr.requests=jr.requests||{},jr.requests.keywords=jr.requests.keywords||{},oa(M.g.IMPBUS),jr.requests.tagsOnPageCount=jr.requests.tagsOnPageCount||0,jr.requests.waitOnTagsCount=jr.requests.waitOnTagsCount||0,jr.requests.showTagDefinedMap=jr.requests.showTagDefinedMap||ra(),jr.highlightAd=function(e){if(ye("Invoking apntag.highlightAd",arguments),h.trackCustomEvent({type:"apntag.highlightAd",tagNumber:e}),e){var t=na()[e];t&&(t.style.border="3px solid #e67300")}},jr.anq.push=function(e){e.call()},jr.setEndpoint=function(e,t){ye("Invoking apntag.setEndpoint",arguments),h.trackCustomEvent({type:"apntag.setEndpoint",endpoint:e,freezeIbUrl:t}),oa(e,t)},jr.setPageOpts=function(e){ye("Invoking apntag.setPageOpts",arguments),h.trackCustomEvent({type:"apntag.setPageOpts",pageOpts:e}),Ma(e)},jr.defineTag=function(e){ye("Invoking apntag.defineTag",arguments),p.a.addPlacementData(e.tagId,{placementId:e.tagId}),h.trackCustomEvent({type:"apntag.defineTag",adOpts:e},e.tagId);var t=La(e);return t},jr.getTag=function(e){if(!e||We(e)){var t=void 0,n=void 0;return e?(n=Dr(e),t=je(jr.requests.tags[e],n)):(t={},jr.requests.tags?Object.keys(jr.requests.tags).forEach((function(e){n=Dr(e),t[e]=je(jr.requests.tags[e],n)})):me("getTag is called before defineTag function, so the tag object will be empty.")),t}ve(e+" is not defined.",M.k.WARN)},jr.getAdWrap=function(e){if(ye("Invoking apntag.getAdWrap",arguments),h.trackCustomEvent({type:"apntag.getAdWrap",tagId:e}),We(e))return e&&jr.requests.tags&&jr.requests.tags[e]&&jr.requests.tags[e].adWrap?jr.requests.tags[e].adWrap:void 0;ve("the "+e+" tag is not defined.",M.k.WARN)},jr.setSizes=function(e,t){ye("Invoking apntag.setSizes",arguments),h.trackCustomEvent({type:"apntag.setSizes",size:t},e),arguments.length<2&&(t=e,e=this.targetId),We(e)?jr.requests.tags[e].sizes=t:ve("the "+e+" tag is not defined.",M.k.WARN)},jr.modifyTag=function(e,t){ye("Invoking apntag.modifyTag",arguments),h.trackCustomEvent({type:"apntag.modifyTag",targetId:e,params:t});var n={};arguments.length<2&&(t=e,e=this.targetId),We(e)?((t.sizes||t.sizeMapping)&&Ba(t,e),Ee(jr.requests.tags[e],(function(e,t){n[t]=e})),Ee(t,(function(e,t){n[t]=e})),jr.requests.tags[e]=n):ve("the "+e+" tag is not defined.",M.k.WARN)},jr.setKeywords=function(e,t,n){ye("Invoking apntag.setKeywords",arguments),h.trackCustomEvent({type:"apntag.setKeywords",targetId:e,params:t,options:n});var a={};"object"==typeof t&&null!==t?We(e)?(Ee(jr.requests.tags[e],(function(e,t){a[t]=e})),a.keywords=a.keywords||{},"object"==typeof n&&null!==n&&!0===n.overrideKeyValue?Ee(t,(function(e,t){a.keywords[t]=e})):Ee(t,(function(e,t){Ae(a.keywords,t)?de(a.keywords[t])?a.keywords[t]=a.keywords[t].concat(e):a.keywords[t]=[a.keywords[t]].concat(e):a.keywords[t]=e})),jr.requests.tags[e]=a):ve("the "+e+" tag is not defined.",M.k.WARN):me("unable to set keywords it should be an object")},jr.onEvent=function(e,t,n){if(ye("Invoking apntag.onEvent",arguments),2===arguments.length&&"function"==typeof t&&typeof this.targetId===Ur)n=t,t="*";else if(arguments.length<3&&(n=t,t=this.targetId,!We(t)))return void ve("the "+t+" tag is not defined.",M.k.WARN);Ye.on(e,t,n)},jr.offEvent=function(e,t,n){if(ye("Invoking apntag.offEvent",arguments),1===arguments.length&&typeof this.targetId===Ur)t="*";else if(arguments.length<2&&(t=this.targetId,!We(t)))return void ve("the "+t+" tag is not defined.",M.k.WARN);if(de(e))for(var a=0;a<e.length;a++)Ye.off(e[a],t,n);else Ye.off(e,t,n)},jr.loadTags=function(e){ye("Invoking apntag.loadTags",arguments),h.trackCustomEvent({type:"apntag.loadTags",tagIds:e}),Ar(e)},jr.refresh=function(e){ye("Invoking apntag.refresh",arguments),h.trackCustomEvent({type:"apntag.refresh",targetObj:e}),Or(e)},jr.resizeAd=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ye("Invoking apntag.resizeAd",arguments),h.trackCustomEvent({type:"apntag.resizeAd",targetId:e,widthHeightArr:t,config:n}),Nr(e,t,n)},jr.enableCookieSet=function(){me("apntag.enableCookieSet has been depreciated"),h.trackCustomEvent({type:"apntag.enableCookieSet"}),function(e){e&&e.override&&(s=e.override),e&&e.cookieUrl&&(d=e.cookieUrl);var t=window.addEventListener?"addEventListener":"attachEvent",n=window[t],a="attachEvent"==t?"onload":"load";"complete"===document.readyState||"interactive"===document.readyState?u():n(a,(function(e){u()}),!1)}()},jr.collapseAd=function(e,t,n){ye("Invoking apntag.collapseAd",arguments),me("apntag.collapseAd has been depreciated, Please use apntag.resizeAd"),h.trackCustomEvent({type:"apntag.collapseAd",targetId:e,height:t,width:n});var a=0,r=0,i=Dr(e);if(i){var o=Be(i);typeof t===Lr&&(a=t),typeof n===Lr&&(r=n);var s=$n.document.getElementById(o);if(null!==s){jr.resizeAd(e,[r,a]),s.style.height=a,s.style.width=r,s.style.display="none";var d=jr.requests.tags[e],c=Pt(d.adResponse);Ye.emit(M.h.COLLAPSE,e,c)}else ve("CollapseAd failed to find ad div : "+e)}else ve("CollapseAd failed to find targetId : "+e)},jr.showTag=function(e,t){var n=void 0;if(ye("Invoking apntag.showTag",arguments),h.trackCustomEvent({type:"apntag.showTag",divId:e,win:t}),"object"==typeof t&&(t.hasOwnProperty("iframeWindow")||t.hasOwnProperty("wcElement"))){if(n=t.wcElement instanceof Element&&t.wcElement,t.wcElement&&!n)return void ve("wcElement is not a DOM element : "+e);t=t.iframeWindow||$n}else t=t||$n;Cr(e,t,n)},jr.setPageTargeting=function(e,t){ye("Invoking apntag.setPageTargeting",arguments),h.trackCustomEvent({type:"apntag.setPageTargeting",key:e,value:t}),jr.requests.targetingParams&&e&&t&&(jr.requests.targetingParams[e]=t)},jr.getPageTargeting=function(e){if(ye("Invoking apntag.getPageTargeting",arguments),h.trackCustomEvent({type:"apntag.getPageTargeting",key:e}),jr.requests.targetingParams&&e)return jr.requests.targetingParams[e]},jr.clearPageTargeting=function(e){ye("Invoking apntag.clearPageTargeting",arguments),h.trackCustomEvent({type:"apntag.clearPageTargeting",key:e}),jr.requests.targetingParams&&e&&delete jr.requests.targetingParams[e]},jr.enableDebug=function(){jr.debug=!0,ye("Invoking apntag.enableDebug",arguments),h.trackCustomEvent({type:"apntag.enableDebug"})},jr.disableDebug=function(){ye("Invoking apntag.disableDebug",arguments),h.trackCustomEvent({type:"apntag.disableDebug"}),jr.debug=!1},jr.notify=function(e,t,n){e?(h.trackCustomEvent({type:"apntag.notify",messageType:e,messagePayload:t,targetId:n}),Ca.invokeNotify(e,t,n)):ve("apntag.notify must be called with `messageType`")},jr.registerRenderer=function(e,t){ye("Invoking apntag.registerRenderer",arguments),h.trackCustomEvent({type:"apntag.registerRenderer",id:e,cb:t}),Ca.registerRenderer(e,t)},jr.getAstVersion=function(){return ye("Invoking apntag.getAstVersion"),"0.60.1"},jr.recordErrorEvent=function(e,t){ye("Invoking apntag.recordErrorEvent",arguments),h.trackCustomEvent({type:"apntag.recordErrorEvent",e:e,targetId:t});var n=jr.requests.tags[t],a=Pt(n.adResponse),r=Ot(e.message,t,e,200);Ye.emit(M.h.ERROR,t,r,a)},jr.clearRequest=function(e){ye("Invoking apntag.clearRequest",e||arguments),h.trackCustomEvent({type:"apntag.clearRequest",targetIds:e}),e?(de(e)||(e=[e]),Ee(e,(function(e){e&&!We(e)&&me(e+" is not defined.",M.k.WARN)})),Ee(jr.requests.tags,(function(t){var n=t.targetId;if(e.includes(jr.requests.tags[n].targetId)){var a=ra(),r=na();0!==Object.keys(a).length&&(delete a[n],ia(a)),0!==Object.keys(r).length&&(delete r[n],aa(r)),delete jr.requests.tags[n],Lt.getInstance().removeIframe(n)}})),0===Object.keys(jr.requests.tags).length&&(jr.requests={},jr.requests.tags={})):(jr.requests={},jr.requests.tags={},ia({}),aa({}),Lt.getInstance().resetInstance())},jr.handleCb=function(e,t,n){ye("Invoking apntag.handleCb",arguments);try{mr(e,t,n)}catch(e){var a=e.message?e.message:e;ve("Internal AST error : ",e);var r=void 0;_r(a,r,200,M.h.BAD_REQUEST,e)}},jr.emitEvent=function(e,t,n){if(!n||!n.content_source||jr.requests.enableMediationEvents){ye("Invoking apntag.emitEvent",arguments);var a=zr(e),r=a.tagId;"impression"===t&&h.trackEvent({type:S},r),Wr(e,t,n)}},jr.getAdMarkup=function(e,t){if(h.trackCustomEvent({type:"apntag.getAdMarkup",targetId:e,uuid:t}),jr.requests.tags&&jr.requests.tags[e]){var n=jr.requests.tags[e];if(n.uuid===t)return n.adResponse.ads}},jr.setSafeFrameConfig=function(e){h.trackCustomEvent({type:"apntag.setSafeFrameConfig",params:e}),Ae(e,"allowExpansionByPush")&&(Yn.expansionByPush=e.allowExpansionByPush),Ae(e,"allowExpansionByOverlay")&&(Yn.expansionByOverlay=e.allowExpansionByOverlay),Ae(e,"sandbox")&&(Yn.sandbox=e.sandbox),Ae(e,"meta")&&(Yn.meta=e.meta)},jr.fireImpressionTrackers=function(e){if(!e.impressionTrackersFired){e.impressionTrackersFired=!0,ye("Firing impression trackers for",e.tagId),h.trackEvent({type:S},e.tagId);var t=e.native&&e.native.impressionTrackers;t&&t.length&&t.forEach((function(e){Ie($n.document.body,e)}));var n=zr(e.uuid);n&&n.trackingManagement&&n.trackingManagement.native&&n.trackingManagement.native.loadViewScriptAt===M.c.NATIVE_VIEWABILITY.IMPRESSION&&(ye("Loading native viewability script during fireImpressionTrackers"),Ve(n.adResponse.ads[0],n.targetId));var a=e.native&&e.native.javascriptTrackers;a&&L({strategy:"WithContent",data:a})}},jr.attachClickTrackers=function(e,t){var n=t instanceof Element,a=n?t.id:t,r=n?t:document.getElementById(t);r?(ye("Attaching click track handler to",a),ne(r,"click",(function(){var t=e.native&&e.native.clickTrackers;h.trackEvent({type:T},e.tagId),t&&t.length&&(ye("Firing click trackers for",e.tagId),t.forEach((function(e){Ie($n.document.body,e)})))}))):ve("HTML element with id "+a+" not found, click trackers not attached")},jr.checkAdAvailable=function(e){return h.trackCustomEvent({type:"apntag.checkAdAvailable",targetId:e}),function(e){var t=apntag.requests.tags[e],n=t&&t.adResponse,a=t&&t.utCalled&&!t.showTagCalled&&n&&Pt(n);return function(e){a&&(n.nobid||e.resolve(a),n.nobid&&e.reject())}}(e)},jr.handleMediationBid=function(e){h.trackCustomEvent({type:"apntag.handleMediationBid",targetId:e});var t=zr(e),n=[];try{var a=t.adResponse.ads;n=a[a.length-1]}catch(e){ye("Trying to get mediated adresponse for renderer",e)}function r(){jr.resizeAd(e,[0,0])}if(n.renderer_url)t.displayed=!1,n.targetId=e,n.ad_type===Br&&(function(e){try{jr.requests.tags[e].adResponse.ads=[n]}catch(e){ye("Trying to set adresponse for video renderer",e)}}(t.targetId),t.enableSafeFrame&&function(e){var t=Lt.getInstance().getIframe(e);t&&t.iframe&&(t.iframe.allow="autoplay",t.iframe.style="overflow:hidden")}(t.targetId)),t.enableSafeFrame?function(e){var t=Lt.getInstance().getIframe(e.targetId).iframe.contentWindow;delete e.curWindow;var n={status:"nativeAssembly",targetId:e.targetId};Aa(t,JSON.stringify(n),Ue())}(t):Ca.loadRenderer(t,n),r();else{var i=Pt(t.adResponse,n);i.adType===qr&&r(),Ye.emit(M.h.LOADED,e,i)}};he("AST library loaded"),function(){for(var e=0;e<jr.anq.length;e++)typeof jr.anq[e].called===Ur&&(jr.anq[e].call(),jr.anq[e].called=!0)}(),jr.requests.checkDisplay||function(e){var t=!1;function n(){t||(t=!0,e())}if(document.addEventListener)document.addEventListener("DOMContentLoaded",n,!1);else if(document.attachEvent){var a=void 0;try{a=null!==window.frameElement}catch(e){}if(document.documentElement.doScroll&&!a){var r=function(){if(!t)try{document.documentElement.doScroll("left"),n()}catch(e){setTimeout(r,10)}};r()}document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()}))}if(window.addEventListener)window.addEventListener("load",n,!1);else if(window.attachEvent)window.attachEvent("onload",n);else{var i=window.onload;window.onload=function(){i&&i(),n()}}}(ze),"function"==typeof window.define&&window.define.amd&&window.define("appnexusAst",[],(function(){return window.apntag}))}]);